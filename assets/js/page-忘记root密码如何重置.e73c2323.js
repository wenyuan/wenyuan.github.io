(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{844:function(s,t,a){"use strict";a.r(t);var e=a(1),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"忘记-root-密码如何重置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#忘记-root-密码如何重置"}},[s._v("#")]),s._v(" 忘记 root 密码如何重置")]),s._v(" "),a("h2",{attrs:{id:"问题描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[s._v("#")]),s._v(" 问题描述")]),s._v(" "),a("p",[s._v("忘记了 root 密码，无法登录服务器。")]),s._v(" "),a("h2",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),a("p",[s._v("进入单用户模式更改一下 root 密码即可。")]),s._v(" "),a("h2",{attrs:{id:"不同发行版本的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不同发行版本的操作"}},[s._v("#")]),s._v(" 不同发行版本的操作")]),s._v(" "),a("blockquote",[a("p",[s._v("不同的 Linux 系统可能会有不同的操作步骤。")])]),s._v(" "),a("h3",{attrs:{id:"对于-centos-6-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对于-centos-6-5"}},[s._v("#")]),s._v(" 对于 CentOS 6.5")]),s._v(" "),a("p",[s._v("1）重启 Linux 系统，在读秒的时候按下任意键就会进入 GRUB 启动菜单")]),s._v(" "),a("p",[s._v("2）选中要使用的内核版本，按「e」进入编辑模式")]),s._v(" "),a("p",[s._v("3）将光标移动到 kernel 那一行，再按一次「e」进入 kernel 该行的编辑画面中。然后在出现的画面当中，最后方输入 "),a("code",[s._v("single")]),s._v("，注意前边有一个空格，例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kernel /vmlinuz-2.6.18-128.el5 ro "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("root")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LABEL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ rhgb quiet single\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4）按下回车键「Enter」确定，然后按「b」就可以启动进入单用户模式了，并自动以 root 用户身份进入命令行界面")]),s._v(" "),a("p",[s._v("6）现在就能够执行 "),a("code",[s._v("passwd")]),s._v(" 命令来设置 root 的新密码了")]),s._v(" "),a("p",[s._v("7）根据系统提示输入两次新的密码后，"),a("code",[s._v("reboot")]),s._v(" 重启系统")]),s._v(" "),a("p",[s._v("8）现在可以使用新设置的 root 密码登录了")]),s._v(" "),a("h3",{attrs:{id:"对于-centos-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对于-centos-7"}},[s._v("#")]),s._v(" 对于 CentOS 7")]),s._v(" "),a("p",[s._v("1）重启 Linux 系统，在读秒的时候按下任意键就会进入 GRUB 启动菜单")]),s._v(" "),a("p",[s._v("2）选中要使用的内核版本，按「e」进入编辑模式")]),s._v(" "),a("p",[s._v("3）找到以 "),a("code",[s._v("linux16")]),s._v(" 开头的行，将其中的 "),a("code",[s._v("ro")]),s._v(" 参数更改为 "),a("code",[s._v("rw init=/sysroot/bin/sh")])]),s._v(" "),a("p",[s._v("4）按下「Ctrl + x」以启动修改后的内核，CentOS 7 将进入单用户模式，并自动以 root 用户身份进入命令行界面")]),s._v(" "),a("p",[s._v("5）使用 "),a("code",[s._v("chroot /sysroot")]),s._v(" 命令切换根目录")]),s._v(" "),a("p",[s._v("6）执行 "),a("code",[s._v("passwd")]),s._v(" 命令来设置新密码")]),s._v(" "),a("p",[s._v("7）执行 "),a("code",[s._v("touch /.autorelabel")]),s._v(" 命令来更新 SELinux 安全标签")]),s._v(" "),a("p",[s._v("8）执行 "),a("code",[s._v("exit")]),s._v(" 命令退出单用户模式，重新启动系统")]),s._v(" "),a("p",[s._v("9）现在可以使用新设置的 root 密码登录了")]),s._v(" "),a("h2",{attrs:{id:"修改密码的密码重启失效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改密码的密码重启失效"}},[s._v("#")]),s._v(" 修改密码的密码重启失效")]),s._v(" "),a("p",[s._v("我在某个 CentOS 7 的镜像上测试时，发现修改密码成功，但是重启服务器又失效了。")]),s._v(" "),a("p",[s._v("解决方法如下：")]),s._v(" "),a("p",[s._v("在进入单用户模式后，执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/selinux/config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("更改为：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后保存，重置密码，重启。")])])}),[],!1,null,null,null);t.default=r.exports}}]);