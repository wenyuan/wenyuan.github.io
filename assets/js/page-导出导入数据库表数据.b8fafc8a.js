(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{740:function(a,s,e){"use strict";e.r(s);var t=e(1),n=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"导出-导入数据库表数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导出-导入数据库表数据"}},[a._v("#")]),a._v(" 导出/导入数据库表数据")]),a._v(" "),e("p",[a._v("使用 Django 自带的管理命令，可以用来备份你的模型实例和数据库表数据。")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("manage.py dumpdata")])]),a._v(" "),e("li",[e("code",[a._v("manage.py loaddata")])])]),a._v(" "),e("h2",{attrs:{id:"dumpdata-导出数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dumpdata-导出数据"}},[a._v("#")]),a._v(" dumpdata 导出数据")]),a._v(" "),e("p",[a._v("通过 "),e("code",[a._v("python manage.py dumpdata -h")]),a._v(" 可以查看相关参数：")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-h")]),a._v(" 查看帮助文档")]),a._v(" "),e("li",[e("code",[a._v("--format")]),a._v(" 格式化输出导出的数据，支持导出数据格式为：json/xml/yaml")]),a._v(" "),e("li",[e("code",[a._v("--indent")]),a._v(" 美化 json 格式，json 缩进空格数")]),a._v(" "),e("li",[e("code",[a._v("--database")]),a._v(" 指定要从中转储装置的特定数据库。默认为 "),e("code",[a._v('"default"')]),a._v(" 数据库")]),a._v(" "),e("li",[e("code",[a._v("--exclude")]),a._v("（"),e("code",[a._v("-e")]),a._v("） 选择不需要备份的 app 或者表")]),a._v(" "),e("li",[e("code",[a._v("--natural-foreign")]),a._v(" 使用外键")]),a._v(" "),e("li",[e("code",[a._v("-a")]),a._v("（"),e("code",[a._v("--all")]),a._v("）使用 Django 的基本管理器转储数据库中存储的所有模型，包括那些将由自定义管理器过滤或修改的模型。")])]),a._v(" "),e("p",[a._v("将整个 Django 使用到的数据库转存到 db.json 文件中（备份整个数据库）：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python manage.py dumpdata "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" db.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("将指定 app 中的所有数据导出（备份指定的 app）：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python manage.py dumpdata app名 "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" app名.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("将指定表中的数据导出（备份特定的表）：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python manage.py dumpdata app名.model名 "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" model名.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("也可以美化一下导出的数据格式，方便查看，比如导出 json 格式的数据：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python manage.py dumpdata app名.model名 --indent "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" --format json "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" model名.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"loaddata-导入数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loaddata-导入数据"}},[a._v("#")]),a._v(" loaddata 导入数据")]),a._v(" "),e("p",[a._v("loaddata 可以用来导入固定格式的数据到数据库，不过一般建议先清空对应表的数据，再导入数据，否则可能会因为字段重复产生报错：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将 users.json 中的数据导入数据库")]),a._v("\npython manage.py loaddata users.json\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("命令执行完，数据就会导入到数据库了。")]),a._v(" "),e("p",[a._v("（完）")])])}),[],!1,null,null,null);s.default=n.exports}}]);