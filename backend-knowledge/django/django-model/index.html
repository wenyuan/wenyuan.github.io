<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Model 字段与属性 | 前端修炼小册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script charset="utf-8" src="/js/main.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://www.fedbook.cn/atom.xml" title="前端修炼小册 Atom Feed">
    <link rel="alternate" type="application/json" href="https://www.fedbook.cn/feed.json" title="前端修炼小册 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://www.fedbook.cn/rss.xml" title="前端修炼小册 RSS Feed">
    <meta name="description" content="Wenyuan&#39;s Front-End Development Book">
    <meta property="og:url" content="/backend-knowledge/django/django-model.html">
    <meta property="og:site_name" content="前端修炼小册">
    <meta property="og:title" content="Model 字段与属性">
    <meta property="og:description" content="Model 字段与属性 前言 模型（Model）代表对数据库的操作，通常一个 Model 会映射为一张数据库中的表，包含了数据的字段和操作方法。 以往要对数据库进行增删改查，需要借助一些第三方模块（比如连接 MySQL 的 pymysql 和 mysqlclient），但这需要我们自己手写 SQL 语句，对于大部分开发者来说既不方便也不安全。于是诞生了一个叫">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="前端修炼小册">
    <meta property="article:author" content="wenyuan">
    
    <link rel="preload" href="/assets/css/0.styles.458593ce.css" as="style"><link rel="preload" href="/assets/js/app.ca8bdf3f.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.ff416f02.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.134d651c.js" as="script"><link rel="preload" href="/assets/js/page-Model字段与属性.434ac1f4.js" as="script"><link rel="prefetch" href="/assets/js/layout-Blog.9c962bd6.js"><link rel="prefetch" href="/assets/js/layout-Layout.f12fcd54.js"><link rel="prefetch" href="/assets/js/layout-NotFound.7a434a78.js"><link rel="prefetch" href="/assets/js/page-@property装饰器.27813bdc.js"><link rel="prefetch" href="/assets/js/page-Arrayprototypeincludes().92be9f2c.js"><link rel="prefetch" href="/assets/js/page-Array扩展.5ea17f45.js"><link rel="prefetch" href="/assets/js/page-BFC.688409d2.js"><link rel="prefetch" href="/assets/js/page-BigInt.e4f772f6.js"><link rel="prefetch" href="/assets/js/page-B端产品文案指南.a777af64.js"><link rel="prefetch" href="/assets/js/page-CSRF攻击.584f5f3b.js"><link rel="prefetch" href="/assets/js/page-CSS.296644af.js"><link rel="prefetch" href="/assets/js/page-CSS引入方式.cba16938.js"><link rel="prefetch" href="/assets/js/page-CSS规范.f6d375aa.js"><link rel="prefetch" href="/assets/js/page-CSS问题.e25cc954.js"><link rel="prefetch" href="/assets/js/page-Class.6f551c39.js"><link rel="prefetch" href="/assets/js/page-CodeFormat工程化实践.5ad5dc07.js"><link rel="prefetch" href="/assets/js/page-CodeReview.b6f40c13.js"><link rel="prefetch" href="/assets/js/page-Django+JWT实现Token认证.66ab9b69.js"><link rel="prefetch" href="/assets/js/page-Django.af0902c2.js"><link rel="prefetch" href="/assets/js/page-Django与Celery的集成.4879aa10.js"><link rel="prefetch" href="/assets/js/page-Django与Channels的集成.463b774c.js"><link rel="prefetch" href="/assets/js/page-Django与Guardian的集成.13aea0c6.js"><link rel="prefetch" href="/assets/js/page-Django内置权限系统使用.9ee50068.js"><link rel="prefetch" href="/assets/js/page-Django内置权限系统扩展.f371a357.js"><link rel="prefetch" href="/assets/js/page-Django用户模型扩展重写.351eae7f.js"><link rel="prefetch" href="/assets/js/page-Django设置Redis作为缓存.52a3fa1c.js"><link rel="prefetch" href="/assets/js/page-ES6-ES12新特性.e62b974e.js"><link rel="prefetch" href="/assets/js/page-ES中的概念与名词.4cda2ff7.js"><link rel="prefetch" href="/assets/js/page-ES的安装.dd4b2153.js"><link rel="prefetch" href="/assets/js/page-ES集群性能优化小记录.3d9c4f2f.js"><link rel="prefetch" href="/assets/js/page-Elasticsearch.692bcc4a.js"><link rel="prefetch" href="/assets/js/page-Flexbox布局.4ce23c31.js"><link rel="prefetch" href="/assets/js/page-Function扩展.28c06cc0.js"><link rel="prefetch" href="/assets/js/page-Generator.24e1acea.js"><link rel="prefetch" href="/assets/js/page-Git.1235d5bb.js"><link rel="prefetch" href="/assets/js/page-GitHooks工程化实践.8bb8cac7.js"><link rel="prefetch" href="/assets/js/page-Git工作流—分支策略.aa9c5da8.js"><link rel="prefetch" href="/assets/js/page-Git提交信息规范.ff60dd56.js"><link rel="prefetch" href="/assets/js/page-Grid布局.0579942a.js"><link rel="prefetch" href="/assets/js/page-HTML.e918be35.js"><link rel="prefetch" href="/assets/js/page-HTML基本结构.1fb7caec.js"><link rel="prefetch" href="/assets/js/page-HTML规范.39c4088e.js"><link rel="prefetch" href="/assets/js/page-HTML问题.2d40863e.js"><link rel="prefetch" href="/assets/js/page-Home.8961ae79.js"><link rel="prefetch" href="/assets/js/page-IP地址.f95c1bcf.js"><link rel="prefetch" href="/assets/js/page-JSON扩展.f81ddc57.js"><link rel="prefetch" href="/assets/js/page-JavaScript.169b0dcd.js"><link rel="prefetch" href="/assets/js/page-JavaScript手写函数.19349551.js"><link rel="prefetch" href="/assets/js/page-JavaScript规范.1db2694d.js"><link rel="prefetch" href="/assets/js/page-Linux系统是如何收发网络包的？.8b64a6fb.js"><link rel="prefetch" href="/assets/js/page-Map.f823e7c8.js"><link rel="prefetch" href="/assets/js/page-Module.5ba6a972.js"><link rel="prefetch" href="/assets/js/page-MySQL.00647ee3.js"><link rel="prefetch" href="/assets/js/page-MySQL主键和自增ID.bf1c04ff.js"><link rel="prefetch" href="/assets/js/page-MySQL事务的隔离性.2981a3d8.js"><link rel="prefetch" href="/assets/js/page-MySQL常用命令.d0c9cdd1.js"><link rel="prefetch" href="/assets/js/page-MySQL数据库设计规范.9299bfd9.js"><link rel="prefetch" href="/assets/js/page-MySQL数据类型.697a4844.js"><link rel="prefetch" href="/assets/js/page-MySQL的安装与卸载.4ed63e2d.js"><link rel="prefetch" href="/assets/js/page-Nginx.426d9cef.js"><link rel="prefetch" href="/assets/js/page-Nginx安全访问控制.d7cf62a1.js"><link rel="prefetch" href="/assets/js/page-Nginx常用命令.3c0747f0.js"><link rel="prefetch" href="/assets/js/page-Nginx文件列表功能.2aa402ee.js"><link rel="prefetch" href="/assets/js/page-Nginx的卸载.420428e3.js"><link rel="prefetch" href="/assets/js/page-Nginx的安装.266df7cb.js"><link rel="prefetch" href="/assets/js/page-Nginx设置开机自启.c9ca1f46.js"><link rel="prefetch" href="/assets/js/page-Nginx部署Https安全认证.207e796f.js"><link rel="prefetch" href="/assets/js/page-Nginx部署前后端分离项目.812b51f0.js"><link rel="prefetch" href="/assets/js/page-Nginx限流常用模块.4cc6d318.js"><link rel="prefetch" href="/assets/js/page-Nginx页面安全认证.c5f79fb8.js"><link rel="prefetch" href="/assets/js/page-Ngixn配置文件模板.9356fcd8.js"><link rel="prefetch" href="/assets/js/page-Ngixn配置文件详解.f93ffe1a.js"><link rel="prefetch" href="/assets/js/page-Number.bf891a5a.js"><link rel="prefetch" href="/assets/js/page-ORM增删改操作.da9547f2.js"><link rel="prefetch" href="/assets/js/page-ObjectfromEntries().4f5cde64.js"><link rel="prefetch" href="/assets/js/page-Object扩展.7a63f46e.js"><link rel="prefetch" href="/assets/js/page-PEP8风格.134ef38b.js"><link rel="prefetch" href="/assets/js/page-Promise.0c36d9c1.js"><link rel="prefetch" href="/assets/js/page-PromiseallSettled().356ea8fd.js"><link rel="prefetch" href="/assets/js/page-Promiseany()和AggregateError.cecb01f8.js"><link rel="prefetch" href="/assets/js/page-Promiseprototypefinally().4e5c4280.js"><link rel="prefetch" href="/assets/js/page-Proxy.79f6f7da.js"><link rel="prefetch" href="/assets/js/page-Python.7be9abd3.js"><link rel="prefetch" href="/assets/js/page-Python多版本虚拟环境共存.001db51f.js"><link rel="prefetch" href="/assets/js/page-React.6c90834a.js"><link rel="prefetch" href="/assets/js/page-ReactHooks（内置）.1572dc61.js"><link rel="prefetch" href="/assets/js/page-ReactHooks（自定义）.e477c413.js"><link rel="prefetch" href="/assets/js/page-ReactJSX.9ffcfdc1.js"><link rel="prefetch" href="/assets/js/page-Redis.a1387c02.js"><link rel="prefetch" href="/assets/js/page-Redis常用命令.864b9713.js"><link rel="prefetch" href="/assets/js/page-Redis数据类型.b324ab5f.js"><link rel="prefetch" href="/assets/js/page-Redis的ACL安全策略.46400b63.js"><link rel="prefetch" href="/assets/js/page-Redis的安装与卸载.bf3db0e0.js"><link rel="prefetch" href="/assets/js/page-Redis缓存三大问题.f720e0c3.js"><link rel="prefetch" href="/assets/js/page-Reflect.0ce09e47.js"><link rel="prefetch" href="/assets/js/page-RegExp扩展.ab7dcd4d.js"><link rel="prefetch" href="/assets/js/page-Set.f7b8c3be.js"><link rel="prefetch" href="/assets/js/page-Signal监测model变化.7ba3f4ef.js"><link rel="prefetch" href="/assets/js/page-String扩展.fea14b3a.js"><link rel="prefetch" href="/assets/js/page-Symbol.710ad238.js"><link rel="prefetch" href="/assets/js/page-Symbol扩展.286c43d6.js"><link rel="prefetch" href="/assets/js/page-TCP三次握手期间异常，会发生什么？.9dc31842.js"><link rel="prefetch" href="/assets/js/page-TCP协议.5621b6ef.js"><link rel="prefetch" href="/assets/js/page-TCP协议重传机制.f4af6801.js"><link rel="prefetch" href="/assets/js/page-TCP和UDP可以使用同一个端口吗？.3e5688ce.js"><link rel="prefetch" href="/assets/js/page-TCP四次挥手期间异常，会发生什么？.e59f964b.js"><link rel="prefetch" href="/assets/js/page-Term查询语法.8132d7ff.js"><link rel="prefetch" href="/assets/js/page-TypeScript.0e6b6de2.js"><link rel="prefetch" href="/assets/js/page-UDP协议.8092dc58.js"><link rel="prefetch" href="/assets/js/page-UML类图.045db7ef.js"><link rel="prefetch" href="/assets/js/page-V8引擎的工作原理.9d8c0fcd.js"><link rel="prefetch" href="/assets/js/page-Vue3源码中的基础工具函数.126dc0c9.js"><link rel="prefetch" href="/assets/js/page-Vuejs.3cc97c82.js"><link rel="prefetch" href="/assets/js/page-Vue项目规范.b3b4fcd5.js"><link rel="prefetch" href="/assets/js/page-Webpack5.7059c063.js"><link rel="prefetch" href="/assets/js/page-asyncawait.06e8dd2b.js"><link rel="prefetch" href="/assets/js/page-clone速度过慢.777336cd.js"><link rel="prefetch" href="/assets/js/page-forawaitof.c4c2af31.js"><link rel="prefetch" href="/assets/js/page-gitrebase的两种用法.e5f3d9f6.js"><link rel="prefetch" href="/assets/js/page-globalThis.cd83291a.js"><link rel="prefetch" href="/assets/js/page-let和const.c52ba7ce.js"><link rel="prefetch" href="/assets/js/page-model元数据Meta.c9d21e3f.js"><link rel="prefetch" href="/assets/js/page-model外键关系.23ae5bc3.js"><link rel="prefetch" href="/assets/js/page-model查询检索操作.8462572c.js"><link rel="prefetch" href="/assets/js/page-model的继承.c8441a4a.js"><link rel="prefetch" href="/assets/js/page-npm、yarn、pnpm区别.8ec37f99.js"><link rel="prefetch" href="/assets/js/page-pull时发现代码冲突，如何解决.f291c1c7.js"><link rel="prefetch" href="/assets/js/page-super()函数.2446344d.js"><link rel="prefetch" href="/assets/js/page-this指向.bf4e8657.js"><link rel="prefetch" href="/assets/js/page-中介者模式.62d3465e.js"><link rel="prefetch" href="/assets/js/page-事件循环机制，微任务和宏任务的关系.87d8471d.js"><link rel="prefetch" href="/assets/js/page-产品与人性28个心理学效应.58edb688.js"><link rel="prefetch" href="/assets/js/page-享元模式.818c4ae0.js"><link rel="prefetch" href="/assets/js/page-代理模式.d39b592d.js"><link rel="prefetch" href="/assets/js/page-代码风格.9038be6f.js"><link rel="prefetch" href="/assets/js/page-伪元素和伪类.07f3fbe7.js"><link rel="prefetch" href="/assets/js/page-作用域.14bc79db.js"><link rel="prefetch" href="/assets/js/page-使用Celery实现任务调度.e2efa042.js"><link rel="prefetch" href="/assets/js/page-使用Fabric执行SSH.83c49b5c.js"><link rel="prefetch" href="/assets/js/page-使用Paramiko执行SSH.c440d1d5.js"><link rel="prefetch" href="/assets/js/page-使用logging配置日志的方式.32bfab72.js"><link rel="prefetch" href="/assets/js/page-使用openpyxl处理新版本Excel.012cedbe.js"><link rel="prefetch" href="/assets/js/page-使用smtplib发送电子邮件.0ec4793d.js"><link rel="prefetch" href="/assets/js/page-使用subprocess执行cmd.0c70d517.js"><link rel="prefetch" href="/assets/js/page-使用telnetlib执行Telnet.cf9e2ef3.js"><link rel="prefetch" href="/assets/js/page-使用xlrd处理旧版本Excel.847b2a2e.js"><link rel="prefetch" href="/assets/js/page-修订FunctionprototypetoString().017f4866.js"><link rel="prefetch" href="/assets/js/page-全局解释器锁（GIL）.0c74033b.js"><link rel="prefetch" href="/assets/js/page-全文搜索语法.cfd31efa.js"><link rel="prefetch" href="/assets/js/page-公共变量、私有变量、保护变量.fc79cf2b.js"><link rel="prefetch" href="/assets/js/page-关于本站.a2ec1152.js"><link rel="prefetch" href="/assets/js/page-内置类型和类型断言.88353ff5.js"><link rel="prefetch" href="/assets/js/page-函数与class类型.6b9296ba.js"><link rel="prefetch" href="/assets/js/page-函数参数.afba4916.js"><link rel="prefetch" href="/assets/js/page-函数类型.5a1811eb.js"><link rel="prefetch" href="/assets/js/page-函数组件设计模式.228e676e.js"><link rel="prefetch" href="/assets/js/page-函数装饰器.816fee67.js"><link rel="prefetch" href="/assets/js/page-分组查询语法.c385af58.js"><link rel="prefetch" href="/assets/js/page-分词器的原理和使用.5d7a19ac.js"><link rel="prefetch" href="/assets/js/page-分页查询的三种语法.9c456f5b.js"><link rel="prefetch" href="/assets/js/page-切片.f8f54373.js"><link rel="prefetch" href="/assets/js/page-刚刚的commit有误，想要撤回.31a34871.js"><link rel="prefetch" href="/assets/js/page-刚刚的push有误，想要撤回.deac4331.js"><link rel="prefetch" href="/assets/js/page-前端登录方案总结.68b04d66.js"><link rel="prefetch" href="/assets/js/page-前端路由原理.1a727695.js"><link rel="prefetch" href="/assets/js/page-动态引入.1e8235bb.js"><link rel="prefetch" href="/assets/js/page-包管理工具.e2cd2591.js"><link rel="prefetch" href="/assets/js/page-协程.1700ccbe.js"><link rel="prefetch" href="/assets/js/page-单例模式.1194134f.js"><link rel="prefetch" href="/assets/js/page-原型与原型链.91c791c8.js"><link rel="prefetch" href="/assets/js/page-原型模式.82f7ba12.js"><link rel="prefetch" href="/assets/js/page-反射.37ae42d4.js"><link rel="prefetch" href="/assets/js/page-受控组件和非受控组件.1786ee8e.js"><link rel="prefetch" href="/assets/js/page-变量与常量.24048940.js"><link rel="prefetch" href="/assets/js/page-可选的CatchBinding.f7544b53.js"><link rel="prefetch" href="/assets/js/page-可选链Optionalchaining.96031329.js"><link rel="prefetch" href="/assets/js/page-同步与异步.d6063791.js"><link rel="prefetch" href="/assets/js/page-同源策略.ae67b47e.js"><link rel="prefetch" href="/assets/js/page-命令模式.ab2cefb6.js"><link rel="prefetch" href="/assets/js/page-哈喽，欢迎你来到了这个页面.0628496d.js"><link rel="prefetch" href="/assets/js/page-响应式原理.4c86ef5d.js"><link rel="prefetch" href="/assets/js/page-垃圾回收.9e0e9ccb.js"><link rel="prefetch" href="/assets/js/page-基本配置.f58d373d.js"><link rel="prefetch" href="/assets/js/page-基础用法要点.4845fa1a.js"><link rel="prefetch" href="/assets/js/page-基础类型（始于JS）.6802247f.js"><link rel="prefetch" href="/assets/js/page-声明函数的六种方式.9a30f67f.js"><link rel="prefetch" href="/assets/js/page-备忘录模式.7b263513.js"><link rel="prefetch" href="/assets/js/page-复杂度分析.bff3db04.js"><link rel="prefetch" href="/assets/js/page-外观模式.4291b0f5.js"><link rel="prefetch" href="/assets/js/page-多线程、多进程.e2116ae1.js"><link rel="prefetch" href="/assets/js/page-大文件分片上传和断点续传.a53d8197.js"><link rel="prefetch" href="/assets/js/page-如何使用GitFlow工作流进行团队协作.b5f6ae14.js"><link rel="prefetch" href="/assets/js/page-如何修改commit信息.53592f56.js"><link rel="prefetch" href="/assets/js/page-如何修改历史commits中的用户名和邮箱.28dc9b07.js"><link rel="prefetch" href="/assets/js/page-如何参与开源项目-提交PR与更新Fork分支.518fa0ee.js"><link rel="prefetch" href="/assets/js/page-如何迁移仓库并保留commits记录.f1b3da8d.js"><link rel="prefetch" href="/assets/js/page-如果已经建立了连接，但是客户端突然出现故障了怎么办？.f2a06dfc.js"><link rel="prefetch" href="/assets/js/page-如果已经建立了连接，但是服务端的进程崩溃会发生什么？.2bddb02b.js"><link rel="prefetch" href="/assets/js/page-子查询语法.178ef0ce.js"><link rel="prefetch" href="/assets/js/page-字面量类型.9a68ce7d.js"><link rel="prefetch" href="/assets/js/page-字面量类型与枚举.f196be4f.js"><link rel="prefetch" href="/assets/js/page-定义字段类型：Mapping.b097b837.js"><link rel="prefetch" href="/assets/js/page-定位（position）.645aa4fc.js"><link rel="prefetch" href="/assets/js/page-实例方法、类方法、静态方法.0cabaee9.js"><link rel="prefetch" href="/assets/js/page-实现Objectcreate方法.7cb9e307.js"><link rel="prefetch" href="/assets/js/page-实现apply方法.248fca88.js"><link rel="prefetch" href="/assets/js/page-实现bind方法.5c9f6166.js"><link rel="prefetch" href="/assets/js/page-实现call方法.c2af71da.js"><link rel="prefetch" href="/assets/js/page-实现instanceof运算符.00fe283f.js"><link rel="prefetch" href="/assets/js/page-实现new运算符.49feaf54.js"><link rel="prefetch" href="/assets/js/page-实现单例模式.e66bd7e8.js"><link rel="prefetch" href="/assets/js/page-实现浅克隆（shallowClone）.bdf4ab58.js"><link rel="prefetch" href="/assets/js/page-实现深克隆（deepClone）.6838d101.js"><link rel="prefetch" href="/assets/js/page-实现符合PromisesA+规范的Promise.aa43aa22.js"><link rel="prefetch" href="/assets/js/page-实现节流函数（throttle）.7242a579.js"><link rel="prefetch" href="/assets/js/page-实现防抖函数（debounce）.5a696756.js"><link rel="prefetch" href="/assets/js/page-对象遍历的几种方式.bb32ed47.js"><link rel="prefetch" href="/assets/js/page-导出导入数据库表数据.1330464e.js"><link rel="prefetch" href="/assets/js/page-尾逗号Trailingcommas.ab5e0740.js"><link rel="prefetch" href="/assets/js/page-嵌套类型和父子文档.f9faf8b2.js"><link rel="prefetch" href="/assets/js/page-工厂模式.cdf2d9af.js"><link rel="prefetch" href="/assets/js/page-已commit未push，想修改代码.cde3afdd.js"><link rel="prefetch" href="/assets/js/page-已commit未push，漏提交文件.16e25e44.js"><link rel="prefetch" href="/assets/js/page-常用命令.489250d2.js"><link rel="prefetch" href="/assets/js/page-常用命令清单.8a2dbf40.js"><link rel="prefetch" href="/assets/js/page-幂运算符.5c1bc89c.js"><link rel="prefetch" href="/assets/js/page-库和表的基本操作.38656e3a.js"><link rel="prefetch" href="/assets/js/page-建造者模式.13bfb46b.js"><link rel="prefetch" href="/assets/js/page-性能优化-产出代码.1c5cf173.js"><link rel="prefetch" href="/assets/js/page-性能优化-构建速度.cd907a3f.js"><link rel="prefetch" href="/assets/js/page-执行migrate时报错SQLite版本过低.9f8413ae.js"><link rel="prefetch" href="/assets/js/page-执行上下文和调用栈.39b8d0a5.js"><link rel="prefetch" href="/assets/js/page-抓包与分析.f5d7d3e9.js"><link rel="prefetch" href="/assets/js/page-抽象工厂模式.3436dd20.js"><link rel="prefetch" href="/assets/js/page-拔掉网线几秒再插回去，原本的TCP连接还在吗？.2b7c3f16.js"><link rel="prefetch" href="/assets/js/page-接口类型与类型别名.e054d3da.js"><link rel="prefetch" href="/assets/js/page-接口设计.328609ef.js"><link rel="prefetch" href="/assets/js/page-搜索词自动补全语法.65f7ad32.js"><link rel="prefetch" href="/assets/js/page-数字分隔符.db091054.js"><link rel="prefetch" href="/assets/js/page-数据的增删改.ec995908.js"><link rel="prefetch" href="/assets/js/page-数据类型.e58a166d.js"><link rel="prefetch" href="/assets/js/page-数据结构与算法.304e4618.js"><link rel="prefetch" href="/assets/js/page-数据结构之数组.b11cdab0.js"><link rel="prefetch" href="/assets/js/page-数据结构之链表.85e2fb2d.js"><link rel="prefetch" href="/assets/js/page-数组遍历的几种方式.b36ae4f4.js"><link rel="prefetch" href="/assets/js/page-文案指南.a11a0a36.js"><link rel="prefetch" href="/assets/js/page-文档基本操作.29e67be2.js"><link rel="prefetch" href="/assets/js/page-文档规范.43fa68fa.js"><link rel="prefetch" href="/assets/js/page-新的逻辑操作符.85b81fec.js"><link rel="prefetch" href="/assets/js/page-更新日志.14f7f107.js"><link rel="prefetch" href="/assets/js/page-最佳实践-通用模板.9bab36ba.js"><link rel="prefetch" href="/assets/js/page-未完待续.f000fea4.js"><link rel="prefetch" href="/assets/js/page-条件查询语法.f8ba1293.js"><link rel="prefetch" href="/assets/js/page-枚举.208fd20a.js"><link rel="prefetch" href="/assets/js/page-栈空间和堆空间.77fcb017.js"><link rel="prefetch" href="/assets/js/page-核心概念.2e63e2e3.js"><link rel="prefetch" href="/assets/js/page-桥接模式.1ae314cb.js"><link rel="prefetch" href="/assets/js/page-模板方法模式.7f16feaf.js"><link rel="prefetch" href="/assets/js/page-模板编译.529b6d48.js"><link rel="prefetch" href="/assets/js/page-正向代理与反向代理.685fde8a.js"><link rel="prefetch" href="/assets/js/page-正排索引与倒排索引.6e08ffde.js"><link rel="prefetch" href="/assets/js/page-泛型.0d6a2b69.js"><link rel="prefetch" href="/assets/js/page-浅克隆与深克隆.2ae0aec8.js"><link rel="prefetch" href="/assets/js/page-浏览器内核与JavaScript引擎.e55f8262.js"><link rel="prefetch" href="/assets/js/page-浏览器宏观认识.217b4ed4.js"><link rel="prefetch" href="/assets/js/page-浏览器相关.4020b029.js"><link rel="prefetch" href="/assets/js/page-浮动（float）.4880a092.js"><link rel="prefetch" href="/assets/js/page-渲染引擎的工作原理.74d76bb4.js"><link rel="prefetch" href="/assets/js/page-源码阅读与学习.0cd05ed6.js"><link rel="prefetch" href="/assets/js/page-版本号定义规范.74e03542.js"><link rel="prefetch" href="/assets/js/page-版本控制.9e993f6a.js"><link rel="prefetch" href="/assets/js/page-状态模式.f7f7c2d2.js"><link rel="prefetch" href="/assets/js/page-生成器generator.4b3133ec.js"><link rel="prefetch" href="/assets/js/page-盒模型.afcd6d1c.js"><link rel="prefetch" href="/assets/js/page-空值合并运算符.7a22fc2f.js"><link rel="prefetch" href="/assets/js/page-策略模式.856c9012.js"><link rel="prefetch" href="/assets/js/page-简单查询语法.4458a831.js"><link rel="prefetch" href="/assets/js/page-类变量和实例变量.86388f34.js"><link rel="prefetch" href="/assets/js/page-类和实例.8d295351.js"><link rel="prefetch" href="/assets/js/page-类型创建.72a38f89.js"><link rel="prefetch" href="/assets/js/page-类型守卫.3a47f6d0.js"><link rel="prefetch" href="/assets/js/page-类型安全保护.49495147.js"><link rel="prefetch" href="/assets/js/page-类型提示TypeHints.a1b5d14c.js"><link rel="prefetch" href="/assets/js/page-类型提示进阶：typing模块.43bd1282.js"><link rel="prefetch" href="/assets/js/page-类的继承.0168892b.js"><link rel="prefetch" href="/assets/js/page-类私有域.23de47e0.js"><link rel="prefetch" href="/assets/js/page-类类型.f99c21cd.js"><link rel="prefetch" href="/assets/js/page-索引模板：IndexTemplate.bdafc324.js"><link rel="prefetch" href="/assets/js/page-索引管理API.d0253093.js"><link rel="prefetch" href="/assets/js/page-组件渲染与更新.2db8c800.js"><link rel="prefetch" href="/assets/js/page-组合查询语法.fa133a43.js"><link rel="prefetch" href="/assets/js/page-组合模式.1c0d2323.js"><link rel="prefetch" href="/assets/js/page-经典布局.ddce99a7.js"><link rel="prefetch" href="/assets/js/page-统计语法：聚合查询.8c01bc5b.js"><link rel="prefetch" href="/assets/js/page-继承的八种方式.2aaf6f2e.js"><link rel="prefetch" href="/assets/js/page-编译器与解释器.e20988e8.js"><link rel="prefetch" href="/assets/js/page-网络分层模型.005e9a80.js"><link rel="prefetch" href="/assets/js/page-网络安全协议（HTTPS）.17e524c3.js"><link rel="prefetch" href="/assets/js/page-网络排查工具.99ef1754.js"><link rel="prefetch" href="/assets/js/page-职责链模式.992bef88.js"><link rel="prefetch" href="/assets/js/page-联合类型与交叉类型.0f667b04.js"><link rel="prefetch" href="/assets/js/page-虚拟DOM与diff算法.76f62939.js"><link rel="prefetch" href="/assets/js/page-表中列的基本属性.6a6b4586.js"><link rel="prefetch" href="/assets/js/page-表达式和函数.717b77cc.js"><link rel="prefetch" href="/assets/js/page-装饰器模式.8c7c8d22.js"><link rel="prefetch" href="/assets/js/page-观察者模式.d14340f3.js"><link rel="prefetch" href="/assets/js/page-解决vim中文乱码问题.c074e80f.js"><link rel="prefetch" href="/assets/js/page-解决方案.1e5bf408.js"><link rel="prefetch" href="/assets/js/page-解构赋值.d00b3bfd.js"><link rel="prefetch" href="/assets/js/page-计算机网络.11586092.js"><link rel="prefetch" href="/assets/js/page-认知偏差知识手册.7dc352aa.js"><link rel="prefetch" href="/assets/js/page-设计原则.6e80902f.js"><link rel="prefetch" href="/assets/js/page-设计模式.414020ad.js"><link rel="prefetch" href="/assets/js/page-设计模式简介.da1fc5c2.js"><link rel="prefetch" href="/assets/js/page-访问者模式和解释器模式.d00e1837.js"><link rel="prefetch" href="/assets/js/page-语义类标签.56b57b85.js"><link rel="prefetch" href="/assets/js/page-语法规范.935b74f8.js"><link rel="prefetch" href="/assets/js/page-课外学习.1300f7d6.js"><link rel="prefetch" href="/assets/js/page-调用函数的四种方式.6bfc350c.js"><link rel="prefetch" href="/assets/js/page-负载均衡.4af5f128.js"><link rel="prefetch" href="/assets/js/page-跨站脚本攻击（XSS）.1a3988e0.js"><link rel="prefetch" href="/assets/js/page-输入URL到页面展示，中间发生了什么？.080b0152.js"><link rel="prefetch" href="/assets/js/page-连接查询语法.cc5583af.js"><link rel="prefetch" href="/assets/js/page-迭代器Iterator.6b197dcf.js"><link rel="prefetch" href="/assets/js/page-迭代器模式.5d2a6b5c.js"><link rel="prefetch" href="/assets/js/page-适配器模式.b4047463.js"><link rel="prefetch" href="/assets/js/page-选择器与样式优先级.0d4a6d3d.js"><link rel="prefetch" href="/assets/js/page-配置密钥实现免密操作.1eec678e.js"><link rel="prefetch" href="/assets/js/page-错误和异常.9a311c1b.js"><link rel="prefetch" href="/assets/js/page-长度和单位.b65ae302.js"><link rel="prefetch" href="/assets/js/page-闭包.3e623fe3.js"><link rel="prefetch" href="/assets/js/page-集群管理API.065599bd.js"><link rel="prefetch" href="/assets/js/page-面向对象编程.fa0b29ab.js"><link rel="prefetch" href="/assets/js/page-高级用法特性.9b4d51df.js"><link rel="prefetch" href="/assets/js/page-高级配置.78a1efef.js"><link rel="prefetch" href="/assets/js/page-高阶函数.0e21c048.js"><link rel="prefetch" href="/assets/js/page-魔术方法（双下划线方法）.1b020fd1.js"><link rel="prefetch" href="/assets/js/vendors~layout-Slide.7da0262f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.458593ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="前端修炼小册" class="logo"> <!----> <span class="site-name can-hide">前端修炼小册</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术规范" class="dropdown-title"><span class="title"><!---->
        技术规范
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/style-guide/version-control/" class="nav-link"><!---->
  版本控制
</a></li><li class="dropdown-item"><a href="/style-guide/program/" class="nav-link"><!---->
  代码风格
</a></li><li class="dropdown-item"><a href="/style-guide/document/" class="nav-link"><!---->
  文档规范
</a></li><li class="dropdown-item"><a href="/style-guide/apis/" class="nav-link"><!---->
  接口设计
</a></li><li class="dropdown-item"><a href="/style-guide/product/" class="nav-link"><!---->
  文案指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title"><!---->
        前端知识
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/css/" class="nav-link"><!---->
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/javascript/" class="nav-link"><!---->
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>进阶</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/es6-and-beyond/" class="nav-link"><!---->
  ECMAScript 6+
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/typescript/" class="nav-link"><!---->
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/browser/" class="nav-link"><!---->
  浏览器相关
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>手写</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/javascript-handwritten/" class="nav-link"><!---->
  JS 手写
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title"><!---->
        工程化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-engineering/vuejs/" class="nav-link"><!---->
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/frontend-engineering/react/" class="nav-link"><!---->
  React
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-engineering/webpack/" class="nav-link"><!---->
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontend-engineering/package/" class="nav-link"><!---->
  包管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="必知必会" class="dropdown-title"><span class="title"><!---->
        必知必会
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>常用工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-subitem"><a href="/basic-skills/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-subitem"><a href="/basic-skills/linux/common-commands/" class="nav-link"><!---->
  Linux
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>网络知识</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/network/" class="nav-link"><!---->
  计算机网络
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深入学习" class="dropdown-title"><span class="title"><!---->
        深入学习
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/in-depth-learning/algorithm/" class="nav-link"><!---->
  数据结构与算法
</a></li><li class="dropdown-item"><a href="/in-depth-learning/design-patterns/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/in-depth-learning/source-code/" class="nav-link"><!---->
  源码阅读与学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端知识" class="dropdown-title"><span class="title"><!---->
        后端知识
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Python 技术栈</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend-knowledge/python/" class="nav-link"><!---->
  Python
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/django/" class="nav-link router-link-active active"><!---->
  Django
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库/中间件</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend-knowledge/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/redis/" class="nav-link"><!---->
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/elasticsearch/" class="nav-link"><!---->
  Elasticsearch
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目相关" class="dropdown-title"><span class="title"><!---->
        项目相关
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/project/solutions/" class="nav-link"><!---->
  解决方案
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title"><!---->
        其它
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站内</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/others/about.html" class="nav-link"><!---->
  关于本站
</a></li><li class="dropdown-subitem"><a href="/extracurricular/" class="nav-link"><!---->
  课外学习
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站外</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.wenyuanblog.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/wenyuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="技术规范" class="dropdown-title"><span class="title"><!---->
      技术规范
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/style-guide/version-control/" class="nav-link"><!---->
  版本控制
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/program/" class="nav-link"><!---->
  代码风格
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/document/" class="nav-link"><!---->
  文档规范
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/apis/" class="nav-link"><!---->
  接口设计
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/product/" class="nav-link"><!---->
  文案指南
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title"><!---->
      前端知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/css/" class="nav-link"><!---->
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/javascript/" class="nav-link"><!---->
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>进阶</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/es6-and-beyond/" class="nav-link"><!---->
  ECMAScript 6+
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/typescript/" class="nav-link"><!---->
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/frontend-knowledge/browser/" class="nav-link"><!---->
  浏览器相关
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>手写</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-knowledge/javascript-handwritten/" class="nav-link"><!---->
  JS 手写
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title"><!---->
      工程化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-engineering/vuejs/" class="nav-link"><!---->
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/frontend-engineering/react/" class="nav-link"><!---->
  React
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend-engineering/webpack/" class="nav-link"><!---->
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontend-engineering/package/" class="nav-link"><!---->
  包管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="必知必会" class="dropdown-title"><span class="title"><!---->
      必知必会
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>常用工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-subitem"><a href="/basic-skills/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-subitem"><a href="/basic-skills/linux/common-commands/" class="nav-link"><!---->
  Linux
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>网络知识</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/network/" class="nav-link"><!---->
  计算机网络
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="深入学习" class="dropdown-title"><span class="title"><!---->
      深入学习
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/in-depth-learning/algorithm/" class="nav-link"><!---->
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/in-depth-learning/design-patterns/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/in-depth-learning/source-code/" class="nav-link"><!---->
  源码阅读与学习
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="后端知识" class="dropdown-title"><span class="title"><!---->
      后端知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Python 技术栈</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend-knowledge/python/" class="nav-link"><!---->
  Python
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/django/" class="nav-link router-link-active active"><!---->
  Django
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库/中间件</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend-knowledge/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/redis/" class="nav-link"><!---->
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend-knowledge/elasticsearch/" class="nav-link"><!---->
  Elasticsearch
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目相关" class="dropdown-title"><span class="title"><!---->
      项目相关
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/solutions/" class="nav-link"><!---->
  解决方案
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title"><!---->
      其它
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站内</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/others/about.html" class="nav-link"><!---->
  关于本站
</a></li><li class="dropdown-subitem"><a href="/extracurricular/" class="nav-link"><!---->
  课外学习
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站外</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.wenyuanblog.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/wenyuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">Django 基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend-knowledge/django/django-model/" aria-current="page" class="active sidebar-link">model 字段与属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#model-的定义" class="sidebar-link">Model 的定义</a></li><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#model-的字段" class="sidebar-link">Model 的字段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#字段命名约束" class="sidebar-link heading3">字段命名约束</a></li><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#常用字段类型" class="sidebar-link heading3">常用字段类型</a></li><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#重点字段使用详解" class="sidebar-link heading3">重点字段使用详解</a></li></ul></li><li class="sidebar-sub-header"><a href="/backend-knowledge/django/django-model/#字段的参数" class="sidebar-link">字段的参数</a></li></ul></li><li><a href="/backend-knowledge/django/django-model-relationship/" class="sidebar-link">model 外键关系</a></li><li><a href="/backend-knowledge/django/django-model-meta/" class="sidebar-link">model 元数据 Meta</a></li><li><a href="/backend-knowledge/django/django-model-inheritance/" class="sidebar-link">model 的继承</a></li><li><a href="/backend-knowledge/django/django-model-create-update-delete/" class="sidebar-link">model 增删改操作</a></li><li><a href="/backend-knowledge/django/django-model-retrieve/" class="sidebar-link">model 查询/检索操作</a></li><li><a href="/backend-knowledge/django/django-signal/" class="sidebar-link">signal 监测 model 变化</a></li><li><a href="/backend-knowledge/django/django-auth/" class="sidebar-link">Django 内置权限系统使用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">Django 实战经验</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">Django 常见问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Model 字段与属性</span></h1> <!----> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/backend-knowledge/django/django-model/#前言" class="anchor-link heading2"><div>前言</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#model-的定义" class="anchor-link heading2"><div>Model 的定义</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#model-的字段" class="anchor-link heading2"><div>Model 的字段</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#字段命名约束" class="anchor-link heading3"><div>字段命名约束</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#常用字段类型" class="anchor-link heading3"><div>常用字段类型</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#重点字段使用详解" class="anchor-link heading3"><div>重点字段使用详解</div></a></li><li class="anchor"><a href="/backend-knowledge/django/django-model/#字段的参数" class="anchor-link heading2"><div>字段的参数</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="model-字段与属性"><a href="#model-字段与属性" class="header-anchor">#</a> Model 字段与属性</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>模型（Model）代表对数据库的操作，通常一个 Model 会映射为一张数据库中的表，包含了数据的字段和操作方法。</p> <p>以往要对数据库进行增删改查，需要借助一些第三方模块（比如连接 MySQL 的 pymysql 和 mysqlclient），但这需要我们自己手写 SQL 语句，对于大部分开发者来说既不方便也不安全。于是诞生了一个叫 ORM（对象关系映射）的工具，它能够将 Python 代码翻译成原生的 SQL 语句。</p> <p>Django 自带 ORM 系统，通过 Model 操作数据库，不管使用的是 MySQL 还是 SQLite，它都能自动生成相应数据库的 SQL 语句，所以不需要过度关注 SQL 语句和数据库种类。</p> <p>当然也可以安装并使用其它的 ORM，比如 SQLAlchemy，但是不对于 Django 来说使用自带的 ORM 更方便更可靠，而且功能也非常强大了。</p> <h2 id="model-的定义"><a href="#model-的定义" class="header-anchor">#</a> Model 的定义</h2> <p>定义一个 Model 的基本原则如下：</p> <ul><li>每个模型在 Django 中的存在形式为一个 Python 类</li> <li>每个类都是 <code>django.db.models.Model</code> 的子类</li> <li>模型（类）的每个字段（属性）代表数据表的某一列</li> <li>建议将模型编写在其所属 app 下的 models.py 文件中</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    first_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
    last_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
    
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        app_label <span class="token operator">=</span> <span class="token string">'myapp'</span>                 <span class="token comment"># 声明模型属于哪个 app</span>
        db_table <span class="token operator">=</span> <span class="token string">'my_friends'</span>             <span class="token comment"># 指定在数据库中的表名，默认是：项目名称_小写类名</span>
        verbose_name <span class="token operator">=</span> _<span class="token punctuation">(</span><span class="token string">'my students'</span><span class="token punctuation">)</span>     <span class="token comment"># 声明打印对象时显示的名字，默认是：小写的模型名</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name  <span class="token comment"># 模型对象的复数名，一边设置同上即可</span>
        unique_together <span class="token operator">=</span> <span class="token punctuation">(</span>                 <span class="token comment"># 联合约束，保证多字段的组合唯一</span>
            <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'birthday'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>元数据 Meta 用于定义除了模型字段外的所有内容，这里仅列举一些定义模型时常用的，更多属性后面会单独整理。</p> <h2 id="model-的字段"><a href="#model-的字段" class="header-anchor">#</a> Model 的字段</h2> <h3 id="字段命名约束"><a href="#字段命名约束" class="header-anchor">#</a> 字段命名约束</h3> <ul><li>字段名不能与 Python 关键字冲突（比如 <code>pass</code> 等）</li> <li>字段名不能有两个以上的下划线在一起，因为两个下划线是 Django 的查询语法（比如 <code>foo__bar</code> 等）</li> <li>字段名不能以下划线结尾，原因同上</li></ul> <h3 id="常用字段类型"><a href="#常用字段类型" class="header-anchor">#</a> 常用字段类型</h3> <p>Django 内置了许多字段类型，它们都位于 <code>django.db.models</code> 中，例如 <code>models.CharField</code>，它们的父类都是 <code>Field</code> 类。这些类型基本满足需求，如果还不够，也可以自定义字段。</p> <p>下面列举一些常用的内置字段和常用的参数，但不包括关系字段类型：</p> <h4 id="_1-autofield"><a href="#_1-autofield" class="header-anchor">#</a> 1. <strong>AutoField</strong></h4> <p>一个自动增加的整数类型字段。通常不需要主动添加它，Django 会自动帮你添加字段：<code>id = models.AutoField(primary_key=True)</code>，这是一个自增字段，从 1 开始计数。如果一定要自己设置主键，那么一定要将字段设置为 <code>primary_key=True</code>。Django 在一个模型中只允许有一个自增字段，并且该字段必须为主键。</p> <h4 id="_2-smallautofield"><a href="#_2-smallautofield" class="header-anchor">#</a> 2. <strong>SmallAutoField</strong></h4> <p>Django3.0 新增。类似 AutoField，但是只允许 1 到 32767。</p> <h4 id="_3-bigautofield"><a href="#_3-bigautofield" class="header-anchor">#</a> 3. <strong>BigAutoField</strong></h4> <p>64 位整数类型自增字段，数字范围更大，从 1 到 9223372036854775807。</p> <h4 id="_4-charfield"><a href="#_4-charfield" class="header-anchor">#</a> 4. <strong>CharField</strong></h4> <p>最常用的类型，字符串类型。必须接收一个 <code>max_length</code> 参数，表示字符串长度不能超过该值。</p> <h4 id="_5-textfield"><a href="#_5-textfield" class="header-anchor">#</a> 5. <strong>TextField</strong></h4> <p>用于储存大量的文本内容，最常用的字段类型之一。Admin 管理界面用 <code>&lt;textarea&gt;</code> 多行编辑框表示该字段数据。</p> <h4 id="_6-booleanfield"><a href="#_6-booleanfield" class="header-anchor">#</a> 6. <strong>BooleanField</strong></h4> <p>布尔值类型。默认值是 None。</p> <h4 id="_7-datefield"><a href="#_7-datefield" class="header-anchor">#</a> 7. <strong>DateField</strong></h4> <p>日期类型。Python 中  <code>datetime.date</code>的实例。两个重要且不能共存的参数：<code>auto_now</code>：每次对象更新都会更新这个时间；<code>auto_now_add</code> 对象第一次创建添加，之后的更新不再改变。</p> <h4 id="_8-datetimefield"><a href="#_8-datetimefield" class="header-anchor">#</a> 8. <strong>DateTimeField</strong></h4> <p>日期时间类型。Python 中 <code>datetime.datetime</code> 的实例。与 DateField 相比就是多了小时、分和秒的显示，其它功能、参数、用法、默认值等等都一样。</p> <h4 id="_9-timefield"><a href="#_9-timefield" class="header-anchor">#</a> 9. <strong>TimeField</strong></h4> <p>时间类型，Python 中 <code>datetime.time</code> 的实例。接收同 DateField 一样的参数，只作用于小时、分和秒。类似于 DateField 和 DateTimeField。</p> <h4 id="_10-decimalfield"><a href="#_10-decimalfield" class="header-anchor">#</a> 10. <strong>DecimalField</strong></h4> <p>固定精度的十进制小数。Python 中 Decimal 的实例。必须提供两个指定的参数：<code>max_digits</code>：最大的位数，必须大于或等于小数点位数；<code>decimal_places</code>：小数点位数，精度。</p> <h4 id="_11-emailfield"><a href="#_11-emailfield" class="header-anchor">#</a> 11. <strong>EmailField</strong></h4> <p>邮箱类型，默认 <code>max_length</code> 最大长度 254 位。使用这个字段的好处是，可以使用 Django 内置的 EmailValidator 进行邮箱格式合法性验证。</p> <h4 id="_12-floatfield"><a href="#_12-floatfield" class="header-anchor">#</a> 12. <strong>FloatField</strong></h4> <p>浮点数类型，对应 Python 的 float。参考整数类型字段。</p> <h4 id="_13-integerfield"><a href="#_13-integerfield" class="header-anchor">#</a> 13. <strong>IntegerField</strong></h4> <p>整数类型，最常用的字段之一。取值范围 -2147483648 到 2147483647。</p> <h4 id="_14-bigintegerfield"><a href="#_14-bigintegerfield" class="header-anchor">#</a> 14. <strong>BigIntegerField</strong></h4> <p>长的整数类型，64 位整数字段，类似 IntegerField ，-9223372036854775808 到 9223372036854775807。</p> <h4 id="_15-smallintegerfield"><a href="#_15-smallintegerfield" class="header-anchor">#</a> 15. <strong>SmallIntegerField</strong></h4> <p>小的整数类型，包含 -32768 到 32767。</p> <h4 id="_16-positiveintegerfield"><a href="#_16-positiveintegerfield" class="header-anchor">#</a> 16. <strong>PositiveIntegerField</strong></h4> <p>正整数（但可以包括 0），从 0 到 2147483647。</p> <h4 id="_17-positivebigintegerfield"><a href="#_17-positivebigintegerfield" class="header-anchor">#</a> 17. <strong>PositiveBigIntegerField</strong></h4> <p>较大的正整数，从 0 到 9223372036854775807。</p> <h4 id="_18-positivesmallintegerfield"><a href="#_18-positivesmallintegerfield" class="header-anchor">#</a> 18. <strong>PositiveSmallIntegerField</strong></h4> <p>较小的正整数，从  0到 32767。</p> <h4 id="_19-genericipaddressfield"><a href="#_19-genericipaddressfield" class="header-anchor">#</a> 19. <strong>GenericIPAddressField</strong></h4> <p>字符串类型（IPV4 和 IPV6 是可选的），参数 <code>protocol</code> 可以是：<code>both</code>、<code>ipv4</code>、<code>ipv6</code>，验证时，会根据设置报错。</p> <h4 id="_20-slugfield"><a href="#_20-slugfield" class="header-anchor">#</a> 20. <strong>SlugField</strong></h4> <p>slug 是一个新闻行业的术语。一个 slug 就是一个某种东西的简短标签，包含字母、数字、下划线或者连接线，通常用于 URLs 中。可以设置 <code>max_length</code> 参数，默认为 50。</p> <h4 id="_21-urlfield"><a href="#_21-urlfield" class="header-anchor">#</a> 21. <strong>URLField</strong></h4> <p>一个用于保存 URL 地址的字符串类型，默认最大长度 200。</p> <h4 id="_22-binaryfield"><a href="#_22-binaryfield" class="header-anchor">#</a> 22. <strong>BinaryField</strong></h4> <p>二进制数据类型。较少使用。</p> <h4 id="_23-imagefield"><a href="#_23-imagefield" class="header-anchor">#</a> 23. <strong>ImageField</strong></h4> <p>图像类型，后面单独介绍。</p> <h4 id="_24-filefield"><a href="#_24-filefield" class="header-anchor">#</a> 24. <strong>FileField</strong></h4> <p>上传文件类型，后面单独介绍。</p> <h4 id="_25-filepathfield"><a href="#_25-filepathfield" class="header-anchor">#</a> 25. <strong>FilePathField</strong></h4> <p>文件路径类型，后面单独介绍。</p> <h4 id="_26-durationfield"><a href="#_26-durationfield" class="header-anchor">#</a> 26. <strong>DurationField</strong></h4> <p>持续时间类型。存储一定期间的时间长度。类似 Python 中的 <code>timedelta</code>。在不同的数据库实现中有不同的表示方法。常用于进行时间之间的加减运算。但是小心了，这里有坑，PostgreSQL等数据库之间有兼容性问题！</p> <h4 id="_27-jsonfield"><a href="#_27-jsonfield" class="header-anchor">#</a> 27. <strong>JSONField</strong></h4> <p>JSON 类型字段。Django3.1 新增。参数 <code>encoder</code> 和 <code>decoder</code> 为可选的编码器和解码器，用于自定义编码和解码方式。如果为该字段提供 <code>default</code> 值，务必保证该值是个不可变的对象，比如字符串对象。</p> <h4 id="_28-uuidfield"><a href="#_28-uuidfield" class="header-anchor">#</a> 28. <strong>UUIDField</strong></h4> <p>用于保存通用唯一识别码（Universally Unique Identifier）的字段。使用 Python 的 UUID 类。在 PostgreSQL 数据库中保存为 uuid 类型，其它数据库中为 char(32)。这个字段是自增主键的最佳替代品。</p> <h3 id="重点字段使用详解"><a href="#重点字段使用详解" class="header-anchor">#</a> 重点字段使用详解</h3> <h4 id="_1-filefield"><a href="#_1-filefield" class="header-anchor">#</a> 1. <strong>FileField</strong></h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">FileField</span><span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上传文件字段（不能设置为主键）。在数据库内，我们实际保存的是一个字符串类型，默认最大长度 100，可以通过 <code>max_length</code> 参数自定义。真实的文件是保存在服务器的文件系统内的。</p> <p>重要参数 <code>upload_to</code> 用于设置上传地址的目录和文件名。如下例所示：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 文件被传至 MEDIA_ROOT/uploads 目录，MEDIA_ROOT 由你 settings 文件中设置</span>
    upload <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'uploads/'</span><span class="token punctuation">)</span>
    <span class="token comment"># 或者</span>
    <span class="token comment"># 被传到 MEDIA_ROOT/uploads/2022/10/02 目录，增加了一个时间划分</span>
    upload <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'uploads/%Y/%m/%d/'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Django 很人性化地帮我们实现了根据日期生成目录或文件的方式。</p> <p><code>upload_to</code> 参数也可以接收一个回调函数，该函数返回具体的路径字符串，如下例：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">user_directory_path</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 文件上传到 MEDIA_ROOT/user_&lt;id&gt;/&lt;filename&gt; 目录中</span>
    <span class="token keyword">return</span> <span class="token string">'user_{0}/{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MyModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    upload <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span>user_directory_path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>例子中，<code>user_directory_path</code> 这种回调函数，必须接收两个参数，然后返回一个 Unix 风格的路径字符串。参数 instace 代表一个定义了 FileField 的模型的实例，说白了就是当前数据记录。filename 是原本的文件名。</p> <p>从 Django3.0 开始，支持使用 pathlib.Path 处理路径。</p> <p>当你访问一个模型对象中的文件字段时，Django 会自动给我们提供一个 FieldFile 实例作为文件的代理，通过这个代理，我们可以进行一些文件操作，主要如下：</p> <ul><li><code>FieldFile.name</code>：获取文件名</li> <li><code>FieldFile.size</code>：获取文件大小</li> <li><code>FieldFile.url</code>：用于访问该文件的 url</li> <li><code>FieldFile.open(mode='rb')</code>：以类似 Python 文件操作的方式，打开文件</li> <li><code>FieldFile.close()</code>：关闭文件</li> <li><code>FieldFile.save(name, content, save=True)</code>：保存文件</li> <li><code>FieldFile.delete(save=True)</code>：删除文件</li></ul> <p>这些代理的 API 和 Python 原生的文件读写 API 非常类似，其实本质上就是进行了一层封装，让我们可以在 Django 内直接对模型中文件字段进行读写，而不需要绕弯子。</p> <h4 id="_2-imagefield"><a href="#_2-imagefield" class="header-anchor">#</a> 2. <strong>ImageField</strong></h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">ImageField</span><span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> height_field<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> width_field<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用于保存图像文件的字段。该字段继承了 FileField，其用法和特性与 FileField 基本一样，只不过多了两个属性 height 和 width。在数据库内，我们实际保存的也是一个字符串类型，默认最大长度 100，可以通过 <code>max_length</code> 参数自定义。真实的图片是保存在服务器的文件系统内的。</p> <p><code>height_field</code> 参数：保存有图片高度信息的模型字段名。<code>width_field</code> 参数：保存有图片宽度信息的模型字段名。</p> <div class="custom-block tip"><p class="custom-block-title">小贴士</p> <p>使用 Django 的 ImageField 需要提前安装 pillow 模块：<code>pip install pillow</code> 即可。</p></div> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>使用 FileField 或者 ImageField 字段的步骤：</p> <ul><li>在 <code>settings.py</code> 文件中，配置 <code>MEDIA_ROOT</code>，作为你上传文件在服务器中的基本路径（为了性能考虑，这些文件不会被储存在数据库中）。再配置个 <code>MEDIA_URL</code>，作为公用 URL，指向上传文件的基本路径。还要确保 Web 服务器的用户账号对该目录具有写的权限。</li> <li>添加 <code>FileField</code> 或者 <code>ImageField</code> 字段到你的模型中，定义好 <code>upload_to</code> 参数，文件最终会放在 <code>MEDIA_ROOT</code> 目录的 &quot;<code>upload_to</code>&quot; 子目录中。</li> <li>所有真正被保存在数据库中的，只是指向你上传文件路径的字符串而已。可以通过 url 属性，在 Django 的 template 模板中方便的访问这些文件。当然了，如果是前后端分离项目，那就根据前端 UI 组件的图片组件的 API 使用方式，传入 url 即可。</li> <li>可以通过 <code>name</code> 和 <code>size</code> 属性，获取文件的名称和大小信息。</li></ul> <p>以上是大致的使用步骤，更详细的代码编写示例，网上搜一下即可，还是很多文章的，这里就不赘述了。</p></div> <p>安全建议：</p> <p>无论你如何保存上传的文件，一定要注意他们的内容和格式，避免安全漏洞！务必对所有的上传文件进行安全检查，确保它们不出问题！如果你不加任何检查就盲目的让任何人上传文件到你的服务器文档根目录内，比如上传了一个 CGI 或者 PHP 脚本，很可能就会被访问的用户执行，这具有致命的危害。</p> <h4 id="_3-filepathfield"><a href="#_3-filepathfield" class="header-anchor">#</a> 3. <strong>FilePathField</strong></h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">FilePathField</span><span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> recursive<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> allow_files<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> allow_folders<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>一种用来保存文件路径信息的字段。在数据表内以字符串的形式存在，默认最大长度 100，可以通过 <code>max_length</code> 参数设置。</p> <p>它包含有下面的一些参数：</p> <ul><li><code>path</code>：必须指定的参数。表示一个系统绝对路径。path通常是个字符串，也可以是个可调用对象，比如函数。</li> <li><code>match</code>：可选参数，一个正则表达式，用于过滤文件名。只匹配基本文件名，不匹配路径。例如 <code>foo.*\.txt$</code>，只匹配文件名 <code>foo23.txt</code>，不匹配 <code>bar.txt</code> 与 <code>foo23.png</code>。</li> <li><code>recursive</code>：可选参数，只能是 <code>True</code> 或者 <code>False</code>。默认为 <code>False</code>。决定是否包含子目录，也就是是否递归的意思。</li> <li><code>allow_files</code>：可选参数，只能是 <code>True</code> 或者 <code>False</code>。默认为 <code>True</code>。决定是否应该将文件名包括在内。它和 <code>allow_folders</code> 两者之间，必须有一个为 <code>True</code>。</li> <li><code>allow_folders</code>：可选参数，只能是 <code>True</code> 或者 <code>False</code>。默认为 <code>False</code>。决定是否应该将目录名包括在内。</li></ul> <p>比如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>FilePathField<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;/home/images&quot;</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token operator">=</span><span class="token string">&quot;foo.*&quot;</span><span class="token punctuation">,</span> recursive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>它只匹配 <code>/home/images/foo.png</code>，但不匹配 <code>/home/images/foo/bar.png</code>，因为默认情况，只匹配文件名，而不管路径是怎么样的。</p> <p>例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> os
<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">def</span> <span class="token function">images_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>LOCAL_FILE_DIR<span class="token punctuation">,</span> <span class="token string">'images'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MyModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>FilePathField<span class="token punctuation">(</span>path<span class="token operator">=</span>images_path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_4-uuidfield"><a href="#_4-uuidfield" class="header-anchor">#</a> 4. <strong>UUIDField</strong></h4> <p>数据库无法自己生成 uuid，因此需要如下使用 default 参数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> uuid  <span class="token comment"># Python的内置模块</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">MyUUIDModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>UUIDField<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">,</span> editable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token comment"># 其它字段</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>注意不要写成 <code>default=uuid.uuid4()</code>。</p> <h2 id="字段的参数"><a href="#字段的参数" class="header-anchor">#</a> 字段的参数</h2> <p>所有的模型字段都可以接收一定数量的参数，比如 <code>CharField</code> 至少需要一个 <code>max_length</code> 参数。下面的这些参数是所有字段都可以使用的，并且是可选的。</p> <h4 id="_1-null"><a href="#_1-null" class="header-anchor">#</a> 1. <strong>null</strong></h4> <p>数据库中字段是否可以为空。默认值为 <code>False</code>。该值为 True 时，Django 在数据库用 <code>NULL</code> 保存空值。对于保存字符串类型数据的字段，请尽量避免将此参数设为 True，那样会导致两种「没有数据」的情况，一种是 <code>NULL</code>，另一种是空字符串 <code>''</code>。Django 的惯例是使用空字符串而不是 <code>NULL</code>。</p> <h4 id="_2-blank"><a href="#_2-blank" class="header-anchor">#</a> 2. <strong>blank</strong></h4> <p>Admin 中是否允许用户提交空表单。默认值为 <code>False</code>。该值为 True 时，字段可以为空。和 null 参数不同的是，null 是纯数据库层面的，而 blank 是验证相关的，它与 Django 自带的表单验证是否允许输入框内为空有关，与数据库无关。所以要小心一个 null 为 False，blank 为 True 的字段接收到一个空值可能会出 bug 或异常。</p> <h4 id="_3-choices"><a href="#_3-choices" class="header-anchor">#</a> 3. <strong>choices</strong></h4> <p>Admin 中显示选择框的内容，需要先提供一个二维的二元元组，第一个元素表示存在数据库内真实的值，第二个表示页面上显示的具体内容。在浏览器页面上将显示第二个元素的值。例如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>YEAR_IN_SCHOOL_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token string">'FR'</span><span class="token punctuation">,</span> <span class="token string">'Freshman'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'SO'</span><span class="token punctuation">,</span> <span class="token string">'Sophomore'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'JR'</span><span class="token punctuation">,</span> <span class="token string">'Junior'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'SR'</span><span class="token punctuation">,</span> <span class="token string">'Senior'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'GR'</span><span class="token punctuation">,</span> <span class="token string">'Graduate'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>一般来说，最好将选项定义在类里，并取一个直观的名字，如下所示：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    FRESHMAN <span class="token operator">=</span> <span class="token string">'FR'</span>
    SOPHOMORE <span class="token operator">=</span> <span class="token string">'SO'</span>
    JUNIOR <span class="token operator">=</span> <span class="token string">'JR'</span>
    SENIOR <span class="token operator">=</span> <span class="token string">'SR'</span>
    YEAR_IN_SCHOOL_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span>FRESHMAN<span class="token punctuation">,</span> <span class="token string">'Freshman'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>SOPHOMORE<span class="token punctuation">,</span> <span class="token string">'Sophomore'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>JUNIOR<span class="token punctuation">,</span> <span class="token string">'Junior'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>SENIOR<span class="token punctuation">,</span> <span class="token string">'Senior'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    year_in_school <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>
        max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>
        choices<span class="token operator">=</span>YEAR_IN_SCHOOL_CHOICES<span class="token punctuation">,</span>
        default<span class="token operator">=</span>FRESHMAN<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">is_upperclass</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>year_in_school <span class="token keyword">in</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>JUNIOR<span class="token punctuation">,</span> self<span class="token punctuation">.</span>SENIOR<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>注意：每当 <code>choices</code> 的顺序变动时将会创建新的迁移。</p> <p>如果一个模型中有多个字段需要设置 choices，可以将这些二维元组组合起来，显得更加整洁优雅，例如下面的做法：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>MEDIA_CHOICES <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">'Audio'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token string">'vinyl'</span><span class="token punctuation">,</span> <span class="token string">'Vinyl'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'cd'</span><span class="token punctuation">,</span> <span class="token string">'CD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'Video'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token string">'vhs'</span><span class="token punctuation">,</span> <span class="token string">'VHS Tape'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token string">'dvd'</span><span class="token punctuation">,</span> <span class="token string">'DVD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'Unknown'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>反过来，要获取一个 choices 的第二元素的值，可以使用 <code>get_FOO_display()</code> 方法，其中的 FOO 用字段名代替。对于下面的例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    SHIRT_SIZES <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token string">'Small'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token string">'Medium'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token string">'Large'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">)</span>
    shirt_size <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>SHIRT_SIZES<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>使用方法：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;Fred Flintstone&quot;</span>, <span class="token assign-left variable">shirt_size</span><span class="token operator">=</span><span class="token string">&quot;L&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p.save<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p.shirt_size
<span class="token string">'L'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p.get_shirt_size_display<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Large'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>从 Django3.0 开始，新增了 TextChoices、IntegerChoices 和 Choices 三个类，用来达到类似 Python 的 enum 枚举库的作用。不过用起来还挺复杂的，个人觉得只有当需要设置很多个 Choice 选项时，才非得用类的形式管理起来封装起来。否则还是二维元组更加方便。</p> <h4 id="_4-db-column"><a href="#_4-db-column" class="header-anchor">#</a> 4. <strong>db_column</strong></h4> <p>该参数用于定义当前字段在数据表内的列名。如果未指定，Django 将使用字段名作为列名。</p> <h4 id="_5-db-index"><a href="#_5-db-index" class="header-anchor">#</a> 5. <strong>db_index</strong></h4> <p>该参数接收布尔值。如果为 True，数据库将为该字段创建索引（<a href="https://github.com/django/django/blob/b92ffebb0cdc469baaf1b8f0e72dddb069eb2fb4/django/db/models/fields/__init__.py#L188" target="_blank" rel="noopener noreferrer">默认为 False<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。如果该字段经常作为查询的条件，那么可以设置为 True 从而加快数据的检索速度。</p> <h4 id="_6-db-tablespace"><a href="#_6-db-tablespace" class="header-anchor">#</a> 6. <strong>db_tablespace</strong></h4> <p>用于字段索引的数据库表空间的名字，前提是当前字段设置了索引。默认值为工程的 <code>DEFAULT_INDEX_TABLESPACE</code> 设置。如果使用的数据库不支持表空间，该参数会被忽略。</p> <h4 id="_7-default"><a href="#_7-default" class="header-anchor">#</a> 7. <strong>default</strong></h4> <p>字段的默认值，可以是值或者一个可调用对象。如果是可调用对象，那么每次创建新对象时都会调用。设置的默认值不能是一个可变对象，比如列表、集合等等。lambda 匿名函数也不可用于 default 的调用对象，因为匿名函数不能被 migrations 序列化。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>注意：在某种原因不明的情况下将 <code>default</code> 设置为 <code>None</code>，可能会引发 intergyerror：not null constraint failed，即非空约束失败异常，导致 <code>python manage.py migrate</code> 失败，此时可将 <code>None</code> 改为 <code>False</code> 或其它的值，只要不是 <code>None</code> 就行。</p></div> <h4 id="_8-primary-key"><a href="#_8-primary-key" class="header-anchor">#</a> 8. <strong>primary_key</strong></h4> <p>如果没有给模型的任何字段设置这个参数为 True，Django 将自动创建一个 AutoField 自增字段，名为 <code>id</code>，并设置为主键。也就是 <code>id = models.AutoField(primary_key=True)</code>。</p> <p>如果为某个字段设置了 <code>primary_key=True</code>，则当前字段变为主键，并关闭 Django 自动生成 id 主键的功能。</p> <p><code>primary_key=True</code> 隐含 <code>null=False</code> 和 <code>unique=True</code> 的意思。一个模型中只能有一个主键字段。</p> <p>另外，主键字段不可修改，如果给某个对象的主键赋个新值实际上是创建一个新对象，并不会修改原来的对象。</p> <h4 id="_9-unique"><a href="#_9-unique" class="header-anchor">#</a> 9. <strong>unique</strong></h4> <p>设为 <code>True</code> 时，在整个数据表内该字段的数据不可重复。</p> <ul><li>注意 1：对于 <code>ManyToManyField</code> 和 <code>OneToOneField</code> 关系类型，该参数无效。</li> <li>注意 2： 当 <code>unique=True</code> 时，<code>db_index</code> 参数无须设置，因为 unqiue 隐含了索引。</li></ul> <h4 id="_10-unique-for-date"><a href="#_10-unique-for-date" class="header-anchor">#</a> 10. <strong>unique_for_date</strong></h4> <p>日期唯一。有点类似联合约束，比如对字段 <code>title</code> 设置 <code>unique_for_date=&quot;pub_date&quot;</code>，就表示 Django 将不允许有两个模型对象具备同样的 <code>title</code> 和 <code>pub_date</code>。</p> <h4 id="_11-unique-for-month"><a href="#_11-unique-for-month" class="header-anchor">#</a> 11. <strong>unique_for_month</strong></h4> <p>同上，只是月份唯一。</p> <h4 id="_12-unique-for-year"><a href="#_12-unique-for-year" class="header-anchor">#</a> 12. <strong>unique_for_year</strong></h4> <p>同上，只是年份唯一。</p> <h4 id="_13-verbose-name"><a href="#_13-verbose-name" class="header-anchor">#</a> 13. <strong>verbose_name</strong></h4> <p>为字段设置一个人类可读，更加直观的别名，这个值会在 Admin 中显示。</p> <p>对于每一个字段类型，除了 ForeignKey、ManyToManyField 和 OneToOneField 这三个特殊的关系类型，其第一可选位置参数都是 <code>verbose_name</code>。如果没指定这个参数，Django 会利用字段名自动创建它，并将下划线转换为空格。</p> <p>对于外键、多对多和一对一字段，由于第一个参数需要用来指定关联的模型，因此必须用关键字参数 <code>verbose_name</code> 来明确指定。如下：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>poll <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>
    Poll<span class="token punctuation">,</span>
    on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>
    verbose_name<span class="token operator">=</span><span class="token string">&quot;the related poll&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
sites <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>Site<span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&quot;list of sites&quot;</span><span class="token punctuation">)</span>
    place <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>
    Place<span class="token punctuation">,</span>
    on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>
    verbose_name<span class="token operator">=</span><span class="token string">&quot;related place&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>另外，无须大写 <code>verbose_name</code> 的首字母，Django 在 Admin 中会自动完成这一工作。</p> <h4 id="_14-auto-now"><a href="#_14-auto-now" class="header-anchor">#</a> 14. <strong>auto_now</strong></h4> <p>更新时自动更新当前时间。</p> <h4 id="_15-auto-now-add"><a href="#_15-auto-now-add" class="header-anchor">#</a> 15. <strong>auto_now_add</strong></h4> <p>创建时自动更新当前时间。</p> <h4 id="_16-editable"><a href="#_16-editable" class="header-anchor">#</a> 16. <strong>editable</strong></h4> <p>Admin 中是否可以编辑。默认值为 <code>True</code>。如果设为 False，那么当前字段将不会在 Admin 后台或者其它的 ModelForm 表单中显示，同时还会被模型验证功能跳过。</p> <h4 id="_17-error-messages"><a href="#_17-error-messages" class="header-anchor">#</a> 17. <strong>error_messages</strong></h4> <p>用于自定义错误信息。参数接收字典类型的值。字典的键可以是 <code>null</code>、<code>blank</code>、<code>invalid</code>、<code>invalid_choice</code>、<code>unique</code> 和 <code>unique_for_date</code> 其中的一个。例如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token string">&quot;null&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;不能为空&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;invalid&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;格式错误&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_18-help-text"><a href="#_18-help-text" class="header-anchor">#</a> 18. <strong>help_text</strong></h4> <p>Admin 中该字段的提示信息。当然了，即便你的字段未用于表单，有时候它对于生成文档也是很有用的。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>该帮助文本默认情况下是可以带 HTML 代码的，具有风险：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>help_text<span class="token operator">=</span><span class="token string">&quot;Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;.&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所以使用时请注意转义为纯文本，防止脚本攻击。</p></div> <h4 id="_19-validators"><a href="#_19-validators" class="header-anchor">#</a> 19. <strong>validators</strong></h4> <p>自定义错误验证（列表类型），从而定制想要的验证规则。例如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>validators <span class="token keyword">import</span> RegexValidator
<span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>validators <span class="token keyword">import</span> EmailValidator<span class="token punctuation">,</span>URLValidator<span class="token punctuation">,</span>DecimalValidator<span class="token punctuation">,</span>
MaxLengthValidator<span class="token punctuation">,</span>MinLengthValidator<span class="token punctuation">,</span>MaxValueValidator<span class="token punctuation">,</span>MinValueValidator

test <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>
    max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span>
    error_messages<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token string">'c1'</span><span class="token punctuation">:</span> <span class="token string">'优先错信息1'</span><span class="token punctuation">,</span>
    <span class="token string">'c2'</span><span class="token punctuation">:</span> <span class="token string">'优先错信息2'</span><span class="token punctuation">,</span>
    <span class="token string">'c3'</span><span class="token punctuation">:</span> <span class="token string">'优先错信息3'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
validators<span class="token operator">=</span><span class="token punctuation">[</span>
    RegexValidator<span class="token punctuation">(</span>regex<span class="token operator">=</span><span class="token string">'root_\d+'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'错误了'</span><span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token string">'c1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    RegexValidator<span class="token punctuation">(</span>regex<span class="token operator">=</span><span class="token string">'root_112233\d+'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'又错误了'</span><span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token string">'c2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    EmailValidator<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'又错误了'</span><span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token string">'c3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>（完）</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/wenyuan/fedbook/edit/main/docs/backend-knowledge/django/django-model.md" target="_blank" rel="noopener noreferrer">编辑此页</a></div> <div class="meta-item update-time"><span class="label">上次编辑于:</span> <span class="info">2022年10月3日 22:20</span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/backend-knowledge/django/django-model-relationship/">
        model 外键关系
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ca8bdf3f.js" defer></script><script src="/assets/js/vendors~layout-Layout.ff416f02.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.134d651c.js" defer></script><script src="/assets/js/page-Model字段与属性.434ac1f4.js" defer></script>
  </body>
</html>
