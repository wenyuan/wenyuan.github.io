<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 的 ACL 安全策略 | CODING 修炼小册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script charset="utf-8" src="/js/main.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://wenyuan.github.io/atom.xml" title="CODING 修炼小册 Atom Feed">
    <link rel="alternate" type="application/json" href="https://wenyuan.github.io/feed.json" title="CODING 修炼小册 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://wenyuan.github.io/rss.xml" title="CODING 修炼小册 RSS Feed">
    <meta name="description" content="前端 / 后端 / 全栈开发">
    <meta property="og:url" content="/backend/redis/access-control-list.html">
    <meta property="og:site_name" content="CODING 修炼小册">
    <meta property="og:title" content="Redis 的 ACL 安全策略">
    <meta property="og:description" content="Redis 的 ACL 安全策略 &quot; ACL 是 Redis 6.0 的新特性，主要是做权限控制的。&quot; &quot; &quot; &quot; 它的出现是因为在 Redis 6.0 版本之前是没有权限的概念的，所有连接的客户端都可以对 Redis 里面的数据进行操作，也可以使用所有高危命令，比如 flushall 或 flushdb 清空掉数据库里面的所有数据。&quot; 背景 最近给新安装的">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="CODING 修炼小册">
    <meta property="article:author" content="wenyuan">
    
    <link rel="preload" href="/assets/css/0.styles.458593ce.css" as="style"><link rel="preload" href="/assets/js/app.2851ffb2.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.e1538772.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.134d651c.js" as="script"><link rel="preload" href="/assets/js/page-Redis的ACL安全策略.6f4caba6.js" as="script"><link rel="prefetch" href="/assets/js/layout-Blog.f025f3ce.js"><link rel="prefetch" href="/assets/js/layout-Layout.f12fcd54.js"><link rel="prefetch" href="/assets/js/layout-NotFound.d701751d.js"><link rel="prefetch" href="/assets/js/page-@property装饰器.75f61dcc.js"><link rel="prefetch" href="/assets/js/page-Arrayprototypeincludes().e7896222.js"><link rel="prefetch" href="/assets/js/page-Array扩展.66167d75.js"><link rel="prefetch" href="/assets/js/page-BFC.f4672501.js"><link rel="prefetch" href="/assets/js/page-BigInt.67d4c64f.js"><link rel="prefetch" href="/assets/js/page-B端产品文案指南.abd428d1.js"><link rel="prefetch" href="/assets/js/page-CSRF攻击.d5190202.js"><link rel="prefetch" href="/assets/js/page-CSS.53770e1b.js"><link rel="prefetch" href="/assets/js/page-CSS引入方式.98a1923c.js"><link rel="prefetch" href="/assets/js/page-CSS规范.02a4cbf9.js"><link rel="prefetch" href="/assets/js/page-CSS问题.d992d76a.js"><link rel="prefetch" href="/assets/js/page-Class.f6e95b7a.js"><link rel="prefetch" href="/assets/js/page-CodeFormat工程化实践.4a0c32d0.js"><link rel="prefetch" href="/assets/js/page-CodeReview.d49fdccd.js"><link rel="prefetch" href="/assets/js/page-Django+JWT实现Token认证.99112e8e.js"><link rel="prefetch" href="/assets/js/page-Django.34584abb.js"><link rel="prefetch" href="/assets/js/page-Django与Celery的集成.8d894788.js"><link rel="prefetch" href="/assets/js/page-Django与Channels的集成.fa5fc38b.js"><link rel="prefetch" href="/assets/js/page-Django与Guardian的集成.3911b7fc.js"><link rel="prefetch" href="/assets/js/page-Django内置权限系统使用.465fd878.js"><link rel="prefetch" href="/assets/js/page-Django内置权限系统扩展.58cf95b0.js"><link rel="prefetch" href="/assets/js/page-Django用户模型扩展重写.f5e79938.js"><link rel="prefetch" href="/assets/js/page-Django设置Redis作为缓存.8c385867.js"><link rel="prefetch" href="/assets/js/page-ES6-ES12新特性.da32632a.js"><link rel="prefetch" href="/assets/js/page-ES中的概念与名词.a52d4096.js"><link rel="prefetch" href="/assets/js/page-ES的安装.6c9962d1.js"><link rel="prefetch" href="/assets/js/page-ES集群性能优化小记录.93061430.js"><link rel="prefetch" href="/assets/js/page-Elasticsearch.f8abbf19.js"><link rel="prefetch" href="/assets/js/page-Flexbox布局.412173b6.js"><link rel="prefetch" href="/assets/js/page-Function扩展.3a7633e4.js"><link rel="prefetch" href="/assets/js/page-Generator.e1715c63.js"><link rel="prefetch" href="/assets/js/page-Git.21a234b4.js"><link rel="prefetch" href="/assets/js/page-GitHooks工程化实践.4a6d5c97.js"><link rel="prefetch" href="/assets/js/page-Git工作流—分支策略.1f7bf458.js"><link rel="prefetch" href="/assets/js/page-Git提交信息规范.a22db398.js"><link rel="prefetch" href="/assets/js/page-Grid布局.9bcec548.js"><link rel="prefetch" href="/assets/js/page-HTML.912602ea.js"><link rel="prefetch" href="/assets/js/page-HTML基本结构.05d76652.js"><link rel="prefetch" href="/assets/js/page-HTML规范.8637eaa8.js"><link rel="prefetch" href="/assets/js/page-HTML问题.933a169f.js"><link rel="prefetch" href="/assets/js/page-HTTP错误状态码及排查路径.c6a9313b.js"><link rel="prefetch" href="/assets/js/page-Home.02a43b85.js"><link rel="prefetch" href="/assets/js/page-IP地址.c6fa7fa7.js"><link rel="prefetch" href="/assets/js/page-JSON扩展.d5545876.js"><link rel="prefetch" href="/assets/js/page-JavaScript.f75972eb.js"><link rel="prefetch" href="/assets/js/page-JavaScript手写函数.12a83e70.js"><link rel="prefetch" href="/assets/js/page-JavaScript规范.b6e56935.js"><link rel="prefetch" href="/assets/js/page-Linux系统是如何收发网络包的？.10be32c5.js"><link rel="prefetch" href="/assets/js/page-Map.857b7a62.js"><link rel="prefetch" href="/assets/js/page-Model字段与属性.e69e726b.js"><link rel="prefetch" href="/assets/js/page-Module.4c90408a.js"><link rel="prefetch" href="/assets/js/page-MySQL.d2d77880.js"><link rel="prefetch" href="/assets/js/page-MySQL主键和自增ID.e850b3fa.js"><link rel="prefetch" href="/assets/js/page-MySQL事务的隔离性.1646db2b.js"><link rel="prefetch" href="/assets/js/page-MySQL常用命令.fd3eb32e.js"><link rel="prefetch" href="/assets/js/page-MySQL数据库设计规范.9644a473.js"><link rel="prefetch" href="/assets/js/page-MySQL数据类型.67fed4d0.js"><link rel="prefetch" href="/assets/js/page-MySQL的安装与卸载.12d83fcc.js"><link rel="prefetch" href="/assets/js/page-Nginx.3e1899d6.js"><link rel="prefetch" href="/assets/js/page-Nginx安全访问控制.f7034442.js"><link rel="prefetch" href="/assets/js/page-Nginx常用命令.dfe3dd98.js"><link rel="prefetch" href="/assets/js/page-Nginx文件列表功能.7856f8d6.js"><link rel="prefetch" href="/assets/js/page-Nginx的卸载.4bf8efca.js"><link rel="prefetch" href="/assets/js/page-Nginx的安装.d4acab4f.js"><link rel="prefetch" href="/assets/js/page-Nginx设置开机自启.72445c57.js"><link rel="prefetch" href="/assets/js/page-Nginx部署Https安全认证.b4a1efb7.js"><link rel="prefetch" href="/assets/js/page-Nginx部署前后端分离项目.f2b9786c.js"><link rel="prefetch" href="/assets/js/page-Nginx限流常用模块.c23bcf8a.js"><link rel="prefetch" href="/assets/js/page-Nginx页面安全认证.2e156757.js"><link rel="prefetch" href="/assets/js/page-Ngixn配置文件模板.c5243e67.js"><link rel="prefetch" href="/assets/js/page-Ngixn配置文件详解.dc16cc21.js"><link rel="prefetch" href="/assets/js/page-Number.87fa1fc9.js"><link rel="prefetch" href="/assets/js/page-ORM增删改操作.3b18f268.js"><link rel="prefetch" href="/assets/js/page-ObjectfromEntries().516cfe45.js"><link rel="prefetch" href="/assets/js/page-Object扩展.9ed20a3d.js"><link rel="prefetch" href="/assets/js/page-PEP8风格.c1c12a3c.js"><link rel="prefetch" href="/assets/js/page-Promise.f850cf87.js"><link rel="prefetch" href="/assets/js/page-PromiseallSettled().c9be6a64.js"><link rel="prefetch" href="/assets/js/page-Promiseany()和AggregateError.72a272b6.js"><link rel="prefetch" href="/assets/js/page-Promiseprototypefinally().9c14dd14.js"><link rel="prefetch" href="/assets/js/page-Proxy.0bfb8f41.js"><link rel="prefetch" href="/assets/js/page-Python.c9b98583.js"><link rel="prefetch" href="/assets/js/page-Python多版本虚拟环境共存.8fb095ce.js"><link rel="prefetch" href="/assets/js/page-React.5598c7a9.js"><link rel="prefetch" href="/assets/js/page-ReactHooks（内置）.2b612573.js"><link rel="prefetch" href="/assets/js/page-ReactHooks（自定义）.7d6544ce.js"><link rel="prefetch" href="/assets/js/page-ReactJSX.3cbef1a2.js"><link rel="prefetch" href="/assets/js/page-Redis.d0dd2f2c.js"><link rel="prefetch" href="/assets/js/page-Redis常用命令.1265b46b.js"><link rel="prefetch" href="/assets/js/page-Redis数据类型.f163838c.js"><link rel="prefetch" href="/assets/js/page-Redis的安装与卸载.251442aa.js"><link rel="prefetch" href="/assets/js/page-Redis缓存三大问题.61a0e711.js"><link rel="prefetch" href="/assets/js/page-Reflect.40fe92f2.js"><link rel="prefetch" href="/assets/js/page-RegExp扩展.89dbc3d5.js"><link rel="prefetch" href="/assets/js/page-Set.50298ffc.js"><link rel="prefetch" href="/assets/js/page-Signal监测model变化.e66bb8d3.js"><link rel="prefetch" href="/assets/js/page-String扩展.13b80437.js"><link rel="prefetch" href="/assets/js/page-Symbol.c8397e43.js"><link rel="prefetch" href="/assets/js/page-Symbol扩展.172f2355.js"><link rel="prefetch" href="/assets/js/page-TCP三次握手期间异常，会发生什么？.bdb50b2d.js"><link rel="prefetch" href="/assets/js/page-TCP协议.e29f6428.js"><link rel="prefetch" href="/assets/js/page-TCP协议重传机制.e3b252c3.js"><link rel="prefetch" href="/assets/js/page-TCP和UDP可以使用同一个端口吗？.45e31bbc.js"><link rel="prefetch" href="/assets/js/page-TCP四次挥手期间异常，会发生什么？.4e2dde27.js"><link rel="prefetch" href="/assets/js/page-Term查询语法.390b5643.js"><link rel="prefetch" href="/assets/js/page-TypeScript.7b590c06.js"><link rel="prefetch" href="/assets/js/page-UDP协议.9148f357.js"><link rel="prefetch" href="/assets/js/page-UML类图.75d209a2.js"><link rel="prefetch" href="/assets/js/page-V8引擎的工作原理.fef2ddbb.js"><link rel="prefetch" href="/assets/js/page-VMware彻底卸载删除干净.1057a7af.js"><link rel="prefetch" href="/assets/js/page-Vue3源码中的基础工具函数.c63f7d4f.js"><link rel="prefetch" href="/assets/js/page-Vuejs.cffd3a99.js"><link rel="prefetch" href="/assets/js/page-Vue项目规范.fcc0c388.js"><link rel="prefetch" href="/assets/js/page-Webpack5.2697355d.js"><link rel="prefetch" href="/assets/js/page-asyncawait.ae7effb9.js"><link rel="prefetch" href="/assets/js/page-clone速度过慢.491f6773.js"><link rel="prefetch" href="/assets/js/page-crontab命令.e2d3361b.js"><link rel="prefetch" href="/assets/js/page-filter()使用isnull参数时返回重复对象.2ca092c3.js"><link rel="prefetch" href="/assets/js/page-forawaitof.8de5736a.js"><link rel="prefetch" href="/assets/js/page-gitrebase的两种用法.ce4e2437.js"><link rel="prefetch" href="/assets/js/page-globalThis.f91c5944.js"><link rel="prefetch" href="/assets/js/page-let和const.b744132e.js"><link rel="prefetch" href="/assets/js/page-model元数据Meta.86fc3cfd.js"><link rel="prefetch" href="/assets/js/page-model外键关系.48fc839d.js"><link rel="prefetch" href="/assets/js/page-model查询检索操作.6057a7b5.js"><link rel="prefetch" href="/assets/js/page-model的继承.0e5aed73.js"><link rel="prefetch" href="/assets/js/page-npm、yarn、pnpm区别.257dc6a8.js"><link rel="prefetch" href="/assets/js/page-pull时发现代码冲突，如何解决.95b16dd3.js"><link rel="prefetch" href="/assets/js/page-super()函数.5abcc76f.js"><link rel="prefetch" href="/assets/js/page-this指向.781f07b9.js"><link rel="prefetch" href="/assets/js/page-中介者模式.7abc3ef5.js"><link rel="prefetch" href="/assets/js/page-事件循环机制，微任务和宏任务的关系.89c43a3c.js"><link rel="prefetch" href="/assets/js/page-产品与人性28个心理学效应.71ec3c1e.js"><link rel="prefetch" href="/assets/js/page-享元模式.32d269fe.js"><link rel="prefetch" href="/assets/js/page-代理模式.f976042c.js"><link rel="prefetch" href="/assets/js/page-代码风格.6f32ed86.js"><link rel="prefetch" href="/assets/js/page-伪元素和伪类.7c1fca74.js"><link rel="prefetch" href="/assets/js/page-作用域.51ba6215.js"><link rel="prefetch" href="/assets/js/page-使用Celery实现任务调度.b6814eba.js"><link rel="prefetch" href="/assets/js/page-使用Fabric执行SSH.703cbe22.js"><link rel="prefetch" href="/assets/js/page-使用Paramiko执行SSH.c05699f8.js"><link rel="prefetch" href="/assets/js/page-使用logging配置日志的方式.faaa0b2f.js"><link rel="prefetch" href="/assets/js/page-使用openpyxl处理新版本Excel.064f637d.js"><link rel="prefetch" href="/assets/js/page-使用smtplib发送电子邮件.249b4505.js"><link rel="prefetch" href="/assets/js/page-使用subprocess执行cmd.a261cbe5.js"><link rel="prefetch" href="/assets/js/page-使用telnetlib执行Telnet.c2d9b1fc.js"><link rel="prefetch" href="/assets/js/page-使用xlrd处理旧版本Excel.b7cba04e.js"><link rel="prefetch" href="/assets/js/page-修订FunctionprototypetoString().34f7600b.js"><link rel="prefetch" href="/assets/js/page-全局解释器锁（GIL）.eaeaf499.js"><link rel="prefetch" href="/assets/js/page-全文搜索语法.9654985d.js"><link rel="prefetch" href="/assets/js/page-公共变量、私有变量、保护变量.3b9b5c36.js"><link rel="prefetch" href="/assets/js/page-关于本站.0e2debe3.js"><link rel="prefetch" href="/assets/js/page-内置类型和类型断言.d02ed0c8.js"><link rel="prefetch" href="/assets/js/page-函数与class类型.d3fae399.js"><link rel="prefetch" href="/assets/js/page-函数参数.5b05f096.js"><link rel="prefetch" href="/assets/js/page-函数类型.c0f153d8.js"><link rel="prefetch" href="/assets/js/page-函数组件设计模式.68e6f4e7.js"><link rel="prefetch" href="/assets/js/page-函数装饰器.62af4127.js"><link rel="prefetch" href="/assets/js/page-分组查询语法.8ed7ea89.js"><link rel="prefetch" href="/assets/js/page-分词器的原理和使用.77723bc9.js"><link rel="prefetch" href="/assets/js/page-分页查询的三种语法.0ebd1899.js"><link rel="prefetch" href="/assets/js/page-切片.08803f54.js"><link rel="prefetch" href="/assets/js/page-刚刚的commit有误，想要撤回.5bac7007.js"><link rel="prefetch" href="/assets/js/page-刚刚的push有误，想要撤回.60835043.js"><link rel="prefetch" href="/assets/js/page-前端登录方案总结.26a948d7.js"><link rel="prefetch" href="/assets/js/page-前端路由原理.eaeb8086.js"><link rel="prefetch" href="/assets/js/page-动态引入.766cc1bb.js"><link rel="prefetch" href="/assets/js/page-包管理工具.877b3b86.js"><link rel="prefetch" href="/assets/js/page-协程.c7a9d167.js"><link rel="prefetch" href="/assets/js/page-单例模式.b2fc0f41.js"><link rel="prefetch" href="/assets/js/page-原型与原型链.1cba1ccf.js"><link rel="prefetch" href="/assets/js/page-原型模式.87980773.js"><link rel="prefetch" href="/assets/js/page-反射.a7bf07ed.js"><link rel="prefetch" href="/assets/js/page-受控组件和非受控组件.9bb2b8c8.js"><link rel="prefetch" href="/assets/js/page-变量与常量.0883659a.js"><link rel="prefetch" href="/assets/js/page-可选的CatchBinding.00dbae26.js"><link rel="prefetch" href="/assets/js/page-可选链Optionalchaining.8b75ab06.js"><link rel="prefetch" href="/assets/js/page-同步与异步.a1c8f783.js"><link rel="prefetch" href="/assets/js/page-同源策略.0b5050ca.js"><link rel="prefetch" href="/assets/js/page-命令模式.6079c853.js"><link rel="prefetch" href="/assets/js/page-命令行操作.51f64189.js"><link rel="prefetch" href="/assets/js/page-响应式原理.0ed0b464.js"><link rel="prefetch" href="/assets/js/page-回流与重绘.c62228d6.js"><link rel="prefetch" href="/assets/js/page-垃圾回收.82f6f96f.js"><link rel="prefetch" href="/assets/js/page-基本配置.fc65917d.js"><link rel="prefetch" href="/assets/js/page-基础入门.f4cd31c3.js"><link rel="prefetch" href="/assets/js/page-基础用法要点.14ed655f.js"><link rel="prefetch" href="/assets/js/page-基础类型（始于JS）.43b53bac.js"><link rel="prefetch" href="/assets/js/page-声明函数的六种方式.a1060f9c.js"><link rel="prefetch" href="/assets/js/page-备忘录模式.a3251654.js"><link rel="prefetch" href="/assets/js/page-复杂度分析.35a3a319.js"><link rel="prefetch" href="/assets/js/page-外观模式.1faa109b.js"><link rel="prefetch" href="/assets/js/page-多线程、多进程.7ddfa96f.js"><link rel="prefetch" href="/assets/js/page-大文件分片上传和断点续传.8669f999.js"><link rel="prefetch" href="/assets/js/page-如何使用GitFlow工作流进行团队协作.d80bcce6.js"><link rel="prefetch" href="/assets/js/page-如何修改commit信息.a33a1f8d.js"><link rel="prefetch" href="/assets/js/page-如何修改历史commits中的用户名和邮箱.f8f30c07.js"><link rel="prefetch" href="/assets/js/page-如何参与开源项目-提交PR与更新Fork分支.87cd8e56.js"><link rel="prefetch" href="/assets/js/page-如何查看ORM对应的SQL语句.a932491b.js"><link rel="prefetch" href="/assets/js/page-如何迁移仓库并保留commits记录.dc8589c3.js"><link rel="prefetch" href="/assets/js/page-如何限制用户可使用的命令.6ae46a54.js"><link rel="prefetch" href="/assets/js/page-如果已经建立了连接，但是客户端突然出现故障了怎么办？.13c70396.js"><link rel="prefetch" href="/assets/js/page-如果已经建立了连接，但是服务端的进程崩溃会发生什么？.55449c8b.js"><link rel="prefetch" href="/assets/js/page-子查询语法.a32f9ab5.js"><link rel="prefetch" href="/assets/js/page-子网掩码、网络地址和广播地址.e9a0b277.js"><link rel="prefetch" href="/assets/js/page-字面量类型.c6781005.js"><link rel="prefetch" href="/assets/js/page-字面量类型与枚举.94c7fc24.js"><link rel="prefetch" href="/assets/js/page-定义字段类型：Mapping.e0aa533a.js"><link rel="prefetch" href="/assets/js/page-定位（position）.ce613a96.js"><link rel="prefetch" href="/assets/js/page-实例方法、类方法、静态方法.a7ffcd26.js"><link rel="prefetch" href="/assets/js/page-实现Objectcreate方法.43638ffd.js"><link rel="prefetch" href="/assets/js/page-实现apply方法.b31a051c.js"><link rel="prefetch" href="/assets/js/page-实现bind方法.870751a6.js"><link rel="prefetch" href="/assets/js/page-实现call方法.d938797c.js"><link rel="prefetch" href="/assets/js/page-实现instanceof运算符.319ae2d3.js"><link rel="prefetch" href="/assets/js/page-实现new运算符.ebb8967a.js"><link rel="prefetch" href="/assets/js/page-实现单例模式.f5baa817.js"><link rel="prefetch" href="/assets/js/page-实现对象数组去重的方法.d335f8ce.js"><link rel="prefetch" href="/assets/js/page-实现数组去重的方法.ba10052f.js"><link rel="prefetch" href="/assets/js/page-实现数组扁平化flat方法.630b6a5e.js"><link rel="prefetch" href="/assets/js/page-实现浅拷贝（shallowClone）.a7392549.js"><link rel="prefetch" href="/assets/js/page-实现深拷贝（deepClone）.b80b2117.js"><link rel="prefetch" href="/assets/js/page-实现符合PromisesA+规范的Promise.800b63ba.js"><link rel="prefetch" href="/assets/js/page-实现节流函数（throttle）.628c9c41.js"><link rel="prefetch" href="/assets/js/page-实现防抖函数（debounce）.abd4eb96.js"><link rel="prefetch" href="/assets/js/page-对象遍历的几种方式.6d43d962.js"><link rel="prefetch" href="/assets/js/page-导出导入数据库表数据.3e86d7aa.js"><link rel="prefetch" href="/assets/js/page-尾逗号Trailingcommas.4810ddc0.js"><link rel="prefetch" href="/assets/js/page-嵌套类型和父子文档.bc021709.js"><link rel="prefetch" href="/assets/js/page-工厂模式.1b57e8ff.js"><link rel="prefetch" href="/assets/js/page-已commit未push，想修改代码.c084f347.js"><link rel="prefetch" href="/assets/js/page-已commit未push，漏提交文件.8ab72d8a.js"><link rel="prefetch" href="/assets/js/page-常用命令.0c551500.js"><link rel="prefetch" href="/assets/js/page-常用命令清单.f1adaadf.js"><link rel="prefetch" href="/assets/js/page-幂运算符.2c1ec69b.js"><link rel="prefetch" href="/assets/js/page-库和表的基本操作.14ae9ed9.js"><link rel="prefetch" href="/assets/js/page-建造者模式.f6310dcb.js"><link rel="prefetch" href="/assets/js/page-忘记root密码如何重置.3a4b4540.js"><link rel="prefetch" href="/assets/js/page-性能优化-产出代码.83fb4462.js"><link rel="prefetch" href="/assets/js/page-性能优化-构建速度.888050fa.js"><link rel="prefetch" href="/assets/js/page-执行migrate时报错SQLite版本过低.562742bb.js"><link rel="prefetch" href="/assets/js/page-执行上下文和调用栈.ba3679cc.js"><link rel="prefetch" href="/assets/js/page-抓包与分析.f472978d.js"><link rel="prefetch" href="/assets/js/page-抽象工厂模式.17026ff4.js"><link rel="prefetch" href="/assets/js/page-拔掉网线几秒再插回去，原本的TCP连接还在吗？.56db9271.js"><link rel="prefetch" href="/assets/js/page-接口类型与类型别名.69e4f348.js"><link rel="prefetch" href="/assets/js/page-接口设计.1022a89d.js"><link rel="prefetch" href="/assets/js/page-搜索词自动补全语法.4574542e.js"><link rel="prefetch" href="/assets/js/page-数字分隔符.52475d9b.js"><link rel="prefetch" href="/assets/js/page-数据的增删改.71e271e5.js"><link rel="prefetch" href="/assets/js/page-数据类型.a63b055b.js"><link rel="prefetch" href="/assets/js/page-数据结构与算法.de5d2318.js"><link rel="prefetch" href="/assets/js/page-数据结构之数组.53d6f817.js"><link rel="prefetch" href="/assets/js/page-数据结构之链表.d6ba08c2.js"><link rel="prefetch" href="/assets/js/page-数组遍历的几种方式.ac81dc54.js"><link rel="prefetch" href="/assets/js/page-文案指南.17ea59f6.js"><link rel="prefetch" href="/assets/js/page-文档基本操作.52c9c8a2.js"><link rel="prefetch" href="/assets/js/page-文档规范.a8b8425f.js"><link rel="prefetch" href="/assets/js/page-新的逻辑操作符.3e622dc0.js"><link rel="prefetch" href="/assets/js/page-更新日志.81109550.js"><link rel="prefetch" href="/assets/js/page-最佳实践-通用模板.f1eee04d.js"><link rel="prefetch" href="/assets/js/page-未完待续.756eb695.js"><link rel="prefetch" href="/assets/js/page-条件查询语法.acf0896d.js"><link rel="prefetch" href="/assets/js/page-枚举.39ee7137.js"><link rel="prefetch" href="/assets/js/page-栈空间和堆空间.7b89b3ea.js"><link rel="prefetch" href="/assets/js/page-核心概念.543fe79e.js"><link rel="prefetch" href="/assets/js/page-桥接模式.95820a5f.js"><link rel="prefetch" href="/assets/js/page-模板方法模式.b8f60f06.js"><link rel="prefetch" href="/assets/js/page-模板编译.25832cc6.js"><link rel="prefetch" href="/assets/js/page-正向代理与反向代理.1ddafa38.js"><link rel="prefetch" href="/assets/js/page-正排索引与倒排索引.03d1e02f.js"><link rel="prefetch" href="/assets/js/page-泛型.60aee4d0.js"><link rel="prefetch" href="/assets/js/page-浅克隆与深克隆.891d78c4.js"><link rel="prefetch" href="/assets/js/page-浏览器内核与JavaScript引擎.e48dff0c.js"><link rel="prefetch" href="/assets/js/page-浏览器宏观认识.23f8f3f3.js"><link rel="prefetch" href="/assets/js/page-浏览器相关.0cb5b701.js"><link rel="prefetch" href="/assets/js/page-浏览器缓存机制.30d97e04.js"><link rel="prefetch" href="/assets/js/page-浮动（float）.4211ce5a.js"><link rel="prefetch" href="/assets/js/page-渲染引擎的工作原理.61743fc5.js"><link rel="prefetch" href="/assets/js/page-源码阅读与学习.9b08f73b.js"><link rel="prefetch" href="/assets/js/page-版本号定义规范.d1acfd82.js"><link rel="prefetch" href="/assets/js/page-版本控制.021ba610.js"><link rel="prefetch" href="/assets/js/page-状态模式.baafe7bb.js"><link rel="prefetch" href="/assets/js/page-生成器generator.796e9e7b.js"><link rel="prefetch" href="/assets/js/page-盒模型.1e9a022f.js"><link rel="prefetch" href="/assets/js/page-空值合并运算符.72068799.js"><link rel="prefetch" href="/assets/js/page-策略模式.f78518b7.js"><link rel="prefetch" href="/assets/js/page-简单查询语法.70b5cf4e.js"><link rel="prefetch" href="/assets/js/page-类变量和实例变量.cb4757fd.js"><link rel="prefetch" href="/assets/js/page-类和实例.af21e013.js"><link rel="prefetch" href="/assets/js/page-类型创建.440d96a0.js"><link rel="prefetch" href="/assets/js/page-类型守卫.3fc165b3.js"><link rel="prefetch" href="/assets/js/page-类型安全保护.65358ae2.js"><link rel="prefetch" href="/assets/js/page-类型提示TypeHints.14a457d5.js"><link rel="prefetch" href="/assets/js/page-类型提示进阶：typing模块.588d78d0.js"><link rel="prefetch" href="/assets/js/page-类的继承.953b8d90.js"><link rel="prefetch" href="/assets/js/page-类私有域.9dfd9e5b.js"><link rel="prefetch" href="/assets/js/page-类类型.9958c7aa.js"><link rel="prefetch" href="/assets/js/page-索引模板：IndexTemplate.f0879fae.js"><link rel="prefetch" href="/assets/js/page-索引管理API.e9da9da6.js"><link rel="prefetch" href="/assets/js/page-组件渲染与更新.4c7a6338.js"><link rel="prefetch" href="/assets/js/page-组合查询语法.7d4a29ed.js"><link rel="prefetch" href="/assets/js/page-组合模式.9dedfed0.js"><link rel="prefetch" href="/assets/js/page-经典布局.7e7b2806.js"><link rel="prefetch" href="/assets/js/page-统计语法：聚合查询.17e8b9b6.js"><link rel="prefetch" href="/assets/js/page-继承的八种方式.01f1750d.js"><link rel="prefetch" href="/assets/js/page-编译器与解释器.2b1f7458.js"><link rel="prefetch" href="/assets/js/page-网络分层模型.ee17e42b.js"><link rel="prefetch" href="/assets/js/page-网络安全协议（HTTPS）.09d1910d.js"><link rel="prefetch" href="/assets/js/page-网络排查工具.99f3927b.js"><link rel="prefetch" href="/assets/js/page-职责链模式.dbe1fd71.js"><link rel="prefetch" href="/assets/js/page-联合类型与交叉类型.b9beb970.js"><link rel="prefetch" href="/assets/js/page-虚拟DOM与diff算法.3bf93673.js"><link rel="prefetch" href="/assets/js/page-表中列的基本属性.862d43b3.js"><link rel="prefetch" href="/assets/js/page-表达式和函数.dd80b019.js"><link rel="prefetch" href="/assets/js/page-装饰器模式.fa797619.js"><link rel="prefetch" href="/assets/js/page-观察者模式.5f4d872a.js"><link rel="prefetch" href="/assets/js/page-解决vim中文乱码问题.d68a1967.js"><link rel="prefetch" href="/assets/js/page-解决方案.72b11edf.js"><link rel="prefetch" href="/assets/js/page-解构赋值.b0533f00.js"><link rel="prefetch" href="/assets/js/page-计算机网络.19a7c99b.js"><link rel="prefetch" href="/assets/js/page-认知偏差知识手册.1cbaf077.js"><link rel="prefetch" href="/assets/js/page-设计原则.36442440.js"><link rel="prefetch" href="/assets/js/page-设计模式.a59c12f5.js"><link rel="prefetch" href="/assets/js/page-设计模式简介.acc44f91.js"><link rel="prefetch" href="/assets/js/page-访问者模式和解释器模式.518b96a1.js"><link rel="prefetch" href="/assets/js/page-语义类标签.34968b8a.js"><link rel="prefetch" href="/assets/js/page-语法规范.3b9d7648.js"><link rel="prefetch" href="/assets/js/page-课外学习.1c9a477f.js"><link rel="prefetch" href="/assets/js/page-调用函数的四种方式.2acbdde9.js"><link rel="prefetch" href="/assets/js/page-负载均衡.a9324e51.js"><link rel="prefetch" href="/assets/js/page-跨站脚本攻击（XSS）.abc9d831.js"><link rel="prefetch" href="/assets/js/page-输入URL到页面展示，中间发生了什么？.c259202b.js"><link rel="prefetch" href="/assets/js/page-连接查询语法.26696097.js"><link rel="prefetch" href="/assets/js/page-迭代器Iterator.ac86730d.js"><link rel="prefetch" href="/assets/js/page-迭代器模式.5fb15663.js"><link rel="prefetch" href="/assets/js/page-适配器模式.52854422.js"><link rel="prefetch" href="/assets/js/page-选择器与样式优先级.34b85a90.js"><link rel="prefetch" href="/assets/js/page-部署纯净的Ubuntu系统.a529e7ff.js"><link rel="prefetch" href="/assets/js/page-配置密钥实现免密操作.f0a9155f.js"><link rel="prefetch" href="/assets/js/page-错误和异常.0f4b3ccb.js"><link rel="prefetch" href="/assets/js/page-长度和单位.7d4b6697.js"><link rel="prefetch" href="/assets/js/page-闭包.e5aabd9e.js"><link rel="prefetch" href="/assets/js/page-问题排查.5d9a0dd4.js"><link rel="prefetch" href="/assets/js/page-集群管理API.8296d63e.js"><link rel="prefetch" href="/assets/js/page-面向对象编程.74057711.js"><link rel="prefetch" href="/assets/js/page-高性能渲染大量数据（虚拟列表）.ea2e3a82.js"><link rel="prefetch" href="/assets/js/page-高级用法特性.b6d489f3.js"><link rel="prefetch" href="/assets/js/page-高级配置.fce82d44.js"><link rel="prefetch" href="/assets/js/page-高阶函数.2a490879.js"><link rel="prefetch" href="/assets/js/page-魔术方法（双下划线方法）.2230d374.js"><link rel="prefetch" href="/assets/js/vendors~layout-Slide.f19bcdd3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.458593ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="CODING 修炼小册" class="logo"> <!----> <span class="site-name can-hide">CODING 修炼小册</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术规范" class="dropdown-title"><span class="title"><!---->
        技术规范
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/style-guide/version-control/" class="nav-link"><!---->
  版本控制
</a></li><li class="dropdown-item"><a href="/style-guide/program/" class="nav-link"><!---->
  代码风格
</a></li><li class="dropdown-item"><a href="/style-guide/document/" class="nav-link"><!---->
  文档规范
</a></li><li class="dropdown-item"><a href="/style-guide/apis/" class="nav-link"><!---->
  接口设计
</a></li><li class="dropdown-item"><a href="/style-guide/product/" class="nav-link"><!---->
  文案指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="必知必会" class="dropdown-title"><span class="title"><!---->
        必知必会
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>常用工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-subitem"><a href="/basic-skills/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-subitem"><a href="/basic-skills/linux/common-commands/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-subitem"><a href="/basic-skills/docker/docker-tutorial/" class="nav-link"><!---->
  Docker
</a></li><li class="dropdown-subitem"><a href="/basic-skills/vmware/uninstallation-of-vmware/" class="nav-link"><!---->
  VMware
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>网络知识</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/network/" class="nav-link"><!---->
  计算机网络
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title"><!---->
        前端知识
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontend/css/" class="nav-link"><!---->
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/" class="nav-link"><!---->
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>进阶</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/es6-and-beyond/" class="nav-link"><!---->
  ECMAScript 6+
</a></li><li class="dropdown-subitem"><a href="/frontend/typescript/" class="nav-link"><!---->
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/frontend/browser/" class="nav-link"><!---->
  浏览器相关
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>手写</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/javascript-handwritten/" class="nav-link"><!---->
  JS 手写
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/vuejs/" class="nav-link"><!---->
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/frontend/react/" class="nav-link"><!---->
  React
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/webpack/" class="nav-link"><!---->
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontend/package/" class="nav-link"><!---->
  包管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端知识" class="dropdown-title"><span class="title"><!---->
        后端知识
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Python 技术栈</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/python/" class="nav-link"><!---->
  Python
</a></li><li class="dropdown-subitem"><a href="/backend/django/" class="nav-link"><!---->
  Django
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库/中间件</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend/redis/" class="nav-link router-link-active active"><!---->
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend/elasticsearch/" class="nav-link"><!---->
  Elasticsearch
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深入学习" class="dropdown-title"><span class="title"><!---->
        深入学习
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/in-depth-learning/algorithm/" class="nav-link"><!---->
  数据结构与算法
</a></li><li class="dropdown-item"><a href="/in-depth-learning/design-patterns/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/in-depth-learning/source-code/" class="nav-link"><!---->
  源码阅读与学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目相关" class="dropdown-title"><span class="title"><!---->
        项目相关
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/project/solutions/" class="nav-link"><!---->
  解决方案
</a></li><li class="dropdown-item"><a href="/project/troubleshooting/" class="nav-link"><!---->
  问题排查
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title"><!---->
        其它
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站内</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/others/about.html" class="nav-link"><!---->
  关于本站
</a></li><li class="dropdown-subitem"><a href="/extracurricular/" class="nav-link"><!---->
  课外学习
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站外</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wenyuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="技术规范" class="dropdown-title"><span class="title"><!---->
      技术规范
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/style-guide/version-control/" class="nav-link"><!---->
  版本控制
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/program/" class="nav-link"><!---->
  代码风格
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/document/" class="nav-link"><!---->
  文档规范
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/apis/" class="nav-link"><!---->
  接口设计
</a></li><li class="dropdown-item"><!----> <a href="/style-guide/product/" class="nav-link"><!---->
  文案指南
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="必知必会" class="dropdown-title"><span class="title"><!---->
      必知必会
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>常用工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-subitem"><a href="/basic-skills/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-subitem"><a href="/basic-skills/linux/common-commands/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-subitem"><a href="/basic-skills/docker/docker-tutorial/" class="nav-link"><!---->
  Docker
</a></li><li class="dropdown-subitem"><a href="/basic-skills/vmware/uninstallation-of-vmware/" class="nav-link"><!---->
  VMware
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>网络知识</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic-skills/network/" class="nav-link"><!---->
  计算机网络
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title"><!---->
      前端知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontend/css/" class="nav-link"><!---->
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/" class="nav-link"><!---->
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>进阶</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/es6-and-beyond/" class="nav-link"><!---->
  ECMAScript 6+
</a></li><li class="dropdown-subitem"><a href="/frontend/typescript/" class="nav-link"><!---->
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/frontend/browser/" class="nav-link"><!---->
  浏览器相关
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>手写</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/javascript-handwritten/" class="nav-link"><!---->
  JS 手写
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/vuejs/" class="nav-link"><!---->
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/frontend/react/" class="nav-link"><!---->
  React
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>工具</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/webpack/" class="nav-link"><!---->
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontend/package/" class="nav-link"><!---->
  包管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="后端知识" class="dropdown-title"><span class="title"><!---->
      后端知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Python 技术栈</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/python/" class="nav-link"><!---->
  Python
</a></li><li class="dropdown-subitem"><a href="/backend/django/" class="nav-link"><!---->
  Django
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库/中间件</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend/redis/" class="nav-link router-link-active active"><!---->
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend/elasticsearch/" class="nav-link"><!---->
  Elasticsearch
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="深入学习" class="dropdown-title"><span class="title"><!---->
      深入学习
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/in-depth-learning/algorithm/" class="nav-link"><!---->
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/in-depth-learning/design-patterns/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/in-depth-learning/source-code/" class="nav-link"><!---->
  源码阅读与学习
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目相关" class="dropdown-title"><span class="title"><!---->
      项目相关
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/solutions/" class="nav-link"><!---->
  解决方案
</a></li><li class="dropdown-item"><!----> <a href="/project/troubleshooting/" class="nav-link"><!---->
  问题排查
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title"><!---->
      其它
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站内</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/others/about.html" class="nav-link"><!---->
  关于本站
</a></li><li class="dropdown-subitem"><a href="/extracurricular/" class="nav-link"><!---->
  课外学习
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>站外</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/wenyuan" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">Redis 基础知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/redis/data-types/" class="sidebar-link">Redis 数据类型</a></li><li><a href="/backend/redis/common-commands/" class="sidebar-link">Redis 常用命令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">Redis 常见问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/redis/three-cache-problems/" class="sidebar-link">Redis 缓存三大问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">Redis 日常运维</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/redis/installation-of-redis/" class="sidebar-link">Redis 的安装与卸载</a></li><li><a href="/backend/redis/access-control-list/" aria-current="page" class="active sidebar-link">Redis 的 ACL 安全策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#背景" class="sidebar-link">背景</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#acl-简介" class="sidebar-link">ACL 简介</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#配置-acl" class="sidebar-link">配置 ACL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#dsl-语法" class="sidebar-link heading3">DSL 语法</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#使用-conf-配置-acl" class="sidebar-link heading3">使用 conf 配置 ACL</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#使用外部-aclfile-配置-acl" class="sidebar-link heading3">使用外部 aclfile 配置 ACL</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#对比-conf-和-aclfile-两种方式" class="sidebar-link heading3">对比 conf 和 aclfile 两种方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#通过命令行来管理用户" class="sidebar-link">通过命令行来管理用户</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#持久化的方式" class="sidebar-link heading3">持久化的方式</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#增删改查用户" class="sidebar-link heading3">增删改查用户</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#登录和切换指定用户" class="sidebar-link heading3">登录和切换指定用户</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#热加载命令" class="sidebar-link heading3">热加载命令</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#持久化命令" class="sidebar-link heading3">持久化命令</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#查看命令类别-用于授权" class="sidebar-link heading3">查看命令类别，用于授权</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#其他常用-acl-命令" class="sidebar-link heading3">其他常用 ACL 命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#acl-规则" class="sidebar-link">ACL 规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#启用和禁用用户" class="sidebar-link heading3">启用和禁用用户</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#允许和禁止调用命令" class="sidebar-link heading3">允许和禁止调用命令</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#允许和禁止访问某些-key" class="sidebar-link heading3">允许和禁止访问某些 Key</a></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#为用户配置有效密码" class="sidebar-link heading3">为用户配置有效密码</a></li></ul></li><li class="sidebar-sub-header"><a href="/backend/redis/access-control-list/#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Redis 的 ACL 安全策略</span></h1> <!----> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/backend/redis/access-control-list/#背景" class="anchor-link heading2"><div>背景</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#acl-简介" class="anchor-link heading2"><div>ACL 简介</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#配置-acl" class="anchor-link heading2"><div>配置 ACL</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#dsl-语法" class="anchor-link heading3"><div>DSL 语法</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#使用-conf-配置-acl" class="anchor-link heading3"><div>使用 conf 配置 ACL</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#使用外部-aclfile-配置-acl" class="anchor-link heading3"><div>使用外部 aclfile 配置 ACL</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#对比-conf-和-aclfile-两种方式" class="anchor-link heading3"><div>对比 conf 和 aclfile 两种方式</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#通过命令行来管理用户" class="anchor-link heading2"><div>通过命令行来管理用户</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#持久化的方式" class="anchor-link heading3"><div>持久化的方式</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#增删改查用户" class="anchor-link heading3"><div>增删改查用户</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#登录和切换指定用户" class="anchor-link heading3"><div>登录和切换指定用户</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#热加载命令" class="anchor-link heading3"><div>热加载命令</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#持久化命令" class="anchor-link heading3"><div>持久化命令</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#查看命令类别-用于授权" class="anchor-link heading3"><div>查看命令类别，用于授权</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#其他常用-acl-命令" class="anchor-link heading3"><div>其他常用 ACL 命令</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#acl-规则" class="anchor-link heading2"><div>ACL 规则</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#启用和禁用用户" class="anchor-link heading3"><div>启用和禁用用户</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#允许和禁止调用命令" class="anchor-link heading3"><div>允许和禁止调用命令</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#允许和禁止访问某些-key" class="anchor-link heading3"><div>允许和禁止访问某些 Key</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#为用户配置有效密码" class="anchor-link heading3"><div>为用户配置有效密码</div></a></li><li class="anchor"><a href="/backend/redis/access-control-list/#参考资料" class="anchor-link heading2"><div>参考资料</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="redis-的-acl-安全策略"><a href="#redis-的-acl-安全策略" class="header-anchor">#</a> Redis 的 ACL 安全策略</h1> <blockquote><p>ACL 是 Redis 6.0 的新特性，主要是做权限控制的。</p> <p>它的出现是因为在 Redis 6.0 版本之前是没有权限的概念的，所有连接的客户端都可以对 Redis 里面的数据进行操作，也可以使用所有高危命令，比如 <code>flushall</code> 或 <code>flushdb</code> 清空掉数据库里面的所有数据。</p></blockquote> <h2 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h2> <p>最近给新安装的 Redis 设置密码时，按照以前的方式，因为在 Redis 6.0 之前，Redis 只有一个 default 用户也是 Redis 中的超级管理员用户，所以要将其设置密码，只需要修改 Redis 配置文件中如下项：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>requirepass <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后重启 Redis 就可以了。</p> <p>这就是在 Redis 6.0 之前给 Redis 用户创建密码的方式，只有一个 <code>default</code> 用户也是 Redis 中的超级管理员用户。</p> <p>但是这次安装的是 Redis 7，在一次开启公网调试并用代码访问时，发现通过配置文件设置的密码并未生效。又重新看了下配置文件，果然在这一项的上面注释中写着：<code>requirepass</code> 与 ACL 不兼容，如果开启了 ACL，那么这项配置将被忽略。</p> <p>看来有必要了解一下 ACL 这个新特性了。</p> <h2 id="acl-简介"><a href="#acl-简介" class="header-anchor">#</a> ACL 简介</h2> <p>在 Redis 6.0 之前的版本，我们只能使用 <code>requirepass</code> 参数给 <code>default</code> 用户配置登录密码，同一个 Redis 集群的所有开发都共享 <code>default</code> 用户，难免会出现误操作把别人的 key 删掉或者数据泄露的情况。</p> <p>因此 Redis 6.0 版本推出了 ACL（Access Controller List）访问控制权限的功能，基于此功能，我们可以设置多个用户，并且给每个用户单独设置命令权限和数据权限。在用户连接之后，它的工作方式是需要客户端进行身份验证，以提供用户名和有效密码：如果身份验证阶段成功，则连接与给定用户关联，并且该用户具有限制。</p> <p>为了保证向下兼容，Redis 6.0 保留了 <code>default</code> 用户和使用 <code>requirepass</code> 的方式给 <code>default</code> 用户设置密码，默认情况下 <code>default</code> 用户拥有 Redis 最大权限，我们使用 redis-cli 连接时如果没有指定用户名，用户也是默认 <code>default</code>。</p> <h2 id="配置-acl"><a href="#配置-acl" class="header-anchor">#</a> 配置 ACL</h2> <p>配置 ACL 的方式有两种，一种是在 conf 文件中直接配置，另一种是在外部 aclfile 中配置。配置的命令是一样的，<strong>但是两种方式只能选择其中一种</strong>。</p> <p>在讲具体的配置方式之前，需要先简单介绍一下定义 ACL 时用到的 DSL 语法。</p> <h3 id="dsl-语法"><a href="#dsl-语法" class="header-anchor">#</a> DSL 语法</h3> <p>ACL 是使用 DSL 定义的，该 DSL 就是一个规则，描述了指定用户可以执行的操作，且是按照从左到右、从第一个到最后一个的顺序实施，因为有时规则的顺序对于理解用户的实际能力很重要。</p> <div class="custom-block tip"><p class="custom-block-title">小贴士</p> <p>DSL（domain specific language）是领域专用语言，其基本思想是「求专不求全」，不像通用目的语言那样目标范围涵盖一切软件问题，而是具有受限的表达，专门针对某一特定问题的计算机语言。</p> <ul><li>Java、Python、C 都是通用性编程语言，也就是我们可以用于多个不同的领域，普通应用编程。</li> <li>HTML、SQL 都算得上是领域专用语言，需要寄生在宿主语言中。比如 React 或者 Vue 支持的 JSX 语法都属于 DSL，「寄生」于前端 HTML 中。</li></ul></div> <p>以查看默认用户的 ACL 为例，默认情况下，只有一个用户定义，称为 <code>default</code>。我们可以使用 <a href="https://redis.io/commands/acl-list/" target="_blank" rel="noopener noreferrer"><code>ACL LIST</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令来检查当前活动的 ACL 并验证新启动的，默认的 Redis 实例的配置是：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;user default on nopass sanitize-payload ~* &amp;* +@all&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解释一下返回值：</p> <ul><li>第一个是固定单词 <code>user</code>，后面跟上用户名（此处是 <code>default</code>）。</li> <li>默认用户已配置为活动状态（<code>on</code>），不需要密码（<code>nopass</code>）</li> <li>权限是访问所有可能的键（<code>~*</code>）和 发布/订阅（Pub/Sub）频道（<code>&amp;*</code>），并能够调用所有可能的命令（<code>+@all</code>）。</li></ul> <p>对于这个默认用户，具有 <code>nopass</code> 规则意味着新连接将自动与默认用户进行身份验证，而无需任何显式的 auth 调用。</p> <p>至于 ACL 规则用 DSL 怎么写，最后再讲，现在有个大概的概念就行。下面展开来讲两种配置方式。</p> <h3 id="使用-conf-配置-acl"><a href="#使用-conf-配置-acl" class="header-anchor">#</a> 使用 conf 配置 ACL</h3> <p>我们之前使用 <code>requirepass</code> 给 <code>default</code> 用户设置密码默认就是使用的 conf 方式。并且 6.0 版本开始，在用之前方式给 <code>default</code> 用户配置密码后，再执行 <code>config rewrite</code> 重写配置，就会自动在 conf 文件最下面新增一行记录来配置 <code>default</code> 的密码和权限。</p> <p>使用 conf 文件配置 default 和其他用户的 ACL 权限，操作步骤如下：</p> <h4 id="_1-第一步-在-conf-文件中配置-default-用户的密码"><a href="#_1-第一步-在-conf-文件中配置-default-用户的密码" class="header-anchor">#</a> 1）第一步，在 conf 文件中配置 <code>default</code> 用户的密码</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># The requirepass is not compatible with aclfile option and the ACL LOAD</span>
<span class="token comment"># command, these will cause requirepass to be ignored.</span>
<span class="token comment">#</span>
requirepass <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-第二步-重启-redis-服务-进入命令行执行-config-rewrite-命令"><a href="#_2-第二步-重启-redis-服务-进入命令行执行-config-rewrite-命令" class="header-anchor">#</a> 2）第二步，重启 redis 服务，进入命令行执行 <code>config rewrite</code> 命令</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config rewrite
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这时候可以看到 conf 文件的最后面自动新增了 <code>default</code> 用户的 ACL，如下所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>user default on nopass sanitize-payload ~* <span class="token operator">&amp;</span>* +@all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-在-conf-文件中注释-aclfile-的路径配置-默认是注释的"><a href="#_3-在-conf-文件中注释-aclfile-的路径配置-默认是注释的" class="header-anchor">#</a> 3）在 conf 文件中注释 aclfile 的路径配置（默认是注释的）</h4> <p>原因是因为两种配置方式（conf 方式和 aclfile 方式）是冲突的，只能开启一个。</p> <div class="language-bash line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-bash"><code><span class="token comment"># Using an external ACL file</span>
<span class="token comment">#</span>
<span class="token comment"># Instead of configuring users here in this file, it is possible to use</span>
<span class="token comment"># a stand-alone file just listing users. The two methods cannot be mixed:</span>
<span class="token comment"># if you configure users here and at the same time you activate the external</span>
<span class="token comment"># ACL file, the server will refuse to start.</span>
<span class="token comment">#</span>
<span class="token comment"># The format of the external ACL user file is exactly the same as the</span>
<span class="token comment"># format that is used inside redis.conf to describe users.</span>
<span class="token comment">#</span>
<span class="token comment"># aclfile /etc/redis/users.acl</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_4-重启-redis-服务来加载配置"><a href="#_4-重启-redis-服务来加载配置" class="header-anchor">#</a> 4）重启 Redis 服务来加载配置</h4> <p>加载配置需要重启 Redis 服务。</p> <h4 id="_5-查看新的-acl-list"><a href="#_5-查看新的-acl-list" class="header-anchor">#</a> 5）查看新的 acl list</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;user default on nopass sanitize-payload ~* &amp;* +@all&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>因此我们可以直接在 conf 配置文件中，使用类似上面 <code>default</code> 用户的这行 DSL 命令来设置用户权限，或者我们也可以配置外部 aclfile 配置权限。</p> <h3 id="使用外部-aclfile-配置-acl"><a href="#使用外部-aclfile-配置-acl" class="header-anchor">#</a> 使用外部 aclfile 配置 ACL</h3> <blockquote><p>如果我们有较多的用户且希望有一个单独的配置文件时，可以使用这种方式。</p></blockquote> <p>配置 aclfile 需要先将 conf 中配置的 DSL 注释掉或直接删除，因为 Redis 不允许两种 ACL 管理方式同时使用，否则在启动 Redis的时候会报下面的错误：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Configuring Redis with users defined in redis.conf and at the same setting an ACL file path is invalid. This setup is very likely to lead to configuration errors and security holes, please define either an ACL file or declare users directly in your redis.conf, but not both.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用外部 aclfile 文件配置 <code>default</code> 和其他用户的 ACL 权限，操作步骤如下：</p> <h4 id="_1-第一步-注释-conf-文件中所有已授权的-acl-命令"><a href="#_1-第一步-注释-conf-文件中所有已授权的-acl-命令" class="header-anchor">#</a> 1）第一步，注释 conf 文件中所有已授权的 ACL 命令</h4> <p>如果先前是用 <code>config rewrite</code> 命令生成的 ACL 语句，那么它们一般是在 conf 文件最末尾，例如 <code>default</code> 用户的这行，把它注释掉：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># user default on nopass sanitize-payload ~* &amp;* +@all</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-第二步-在-conf-文件中配置外部-aclfile-路径"><a href="#_2-第二步-在-conf-文件中配置外部-aclfile-路径" class="header-anchor">#</a> 2）第二步，在 conf 文件中配置外部 aclfile 路径</h4> <ul><li>在 conf 文件中注释掉 <code>default</code> 用户的密码，因为开启 aclfile 之后，<code>requirepass</code> 的密码就失效了</li> <li>在 conf 文件中配置 aclfile 的路径，然后创建该文件，否则重启 Redis 服务会报错找不到该文件</li></ul> <div class="language-bash line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-bash"><code><span class="token comment"># Using an external ACL file</span>
<span class="token comment">#</span>
<span class="token comment"># Instead of configuring users here in this file, it is possible to use</span>
<span class="token comment"># a stand-alone file just listing users. The two methods cannot be mixed:</span>
<span class="token comment"># if you configure users here and at the same time you activate the external</span>
<span class="token comment"># ACL file, the server will refuse to start.</span>
<span class="token comment">#</span>
<span class="token comment"># The format of the external ACL user file is exactly the same as the</span>
<span class="token comment"># format that is used inside redis.conf to describe users.</span>
<span class="token comment">#</span>
aclfile /usr/local/redis/acl/users.acl

<span class="token comment"># IMPORTANT NOTE: starting with Redis 6 &quot;requirepass&quot; is just a compatibility</span>
<span class="token comment"># layer on top of the new ACL system. The option effect will be just setting</span>
<span class="token comment"># the password for the default user. Clients will still authenticate using</span>
<span class="token comment"># AUTH &lt;password&gt; as usually, or more explicitly with AUTH default &lt;password&gt;</span>
<span class="token comment"># if they follow the new protocol: both will work.</span>
<span class="token comment">#</span>
<span class="token comment"># The requirepass is not compatible with aclfile option and the ACL LOAD</span>
<span class="token comment"># command, these will cause requirepass to be ignored.</span>
<span class="token comment">#</span>
<span class="token comment"># requirepass 123456</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>新建一个文件夹 <code>acl/</code>，然后新建一个文件 <code>users.acl</code>，将用户权限相关的配置（DSL 语法）拷贝到 <code>users.acl</code> 中：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/redis/
<span class="token function">mkdir</span> acl
<span class="token builtin class-name">cd</span> acl
<span class="token function">vim</span> users.acl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后将信息写入到配置文件中：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>user default on nopass sanitize-payload ~* <span class="token operator">&amp;</span>* +@all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面这段 DSL 是从前面复制的，由<code>config rewrite</code> 命令生成的。也就是有最高权限的 <code>default</code> 用户。</p> <h4 id="_3-第三步-重启-redis-服务来加载配置"><a href="#_3-第三步-重启-redis-服务来加载配置" class="header-anchor">#</a> 3）第三步，重启 Redis 服务来加载配置</h4> <p>加载配置需要重启 Redis 服务。</p> <p>PS：经测试，首次将 conf 方式改为 aclfile 方式，必须要重启 Redis 服务才行（否则会报错 <code>(error) ERR This Redis instance is not configured to use an ACL file.（此处省略 100 字）</code>）。</p> <p>而以后修改 <code>users.acl</code> 文件里面的 DSL 语句后，只需要在命令行执行 <code>acl load</code> 即可将将最新的 aclfile 中的权限加载至 Redis服务中）</p> <h4 id="_4-查看新的-acl-list"><a href="#_4-查看新的-acl-list" class="header-anchor">#</a> 4）查看新的 acl list</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;user default on nopass sanitize-payload ~* &amp;* +@all&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="对比-conf-和-aclfile-两种方式"><a href="#对比-conf-和-aclfile-两种方式" class="header-anchor">#</a> 对比 conf 和 aclfile 两种方式</h3> <p>在 conf 和 aclfile 两种方式中配置 DSL，官方更推荐使用 aclfile，因为如果在 conf 中配置了权限之后需要重启 redis 服务才能将配置的权限加载至 Redis 服务中来，但如果使用 aclfile 模式，可以调用 <code>acl load</code> 命令将 aclfile 中配置的 ACL 权限热加载进环境中，类似于 MySQL 中的 <code>flush privileges</code>。</p> <p><svg id="SvgjsSvg1006" width="611" height="235" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,67)"><path id="SvgjsPath1009" d="M0 0L165.9999 0L165.9999 35.75 L0 35.75Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#f5f7fb"></path><path id="SvgjsPath1010" d="M165.9999 0L373.96259999999995 0L373.96259999999995 35.75 L165.9999 35.75Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#f5f7fb"></path><path id="SvgjsPath1011" d="M373.9626 0L561 0L561 35.75 L373.9626 35.75Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#f5f7fb"></path><path id="SvgjsPath1012" d="M0 35.75L165.9999 35.75L165.9999 71.5 L0 71.5Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1013" d="M165.9999 35.75L373.96259999999995 35.75L373.96259999999995 71.5 L165.9999 71.5Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1014" d="M373.9626 35.75L561 35.75L561 71.5 L373.9626 71.5Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1015" d="M0 71.5L165.9999 71.5L165.9999 107.25 L0 107.25Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1016" d="M165.9999 71.5L373.96259999999995 71.5L373.96259999999995 107.25 L165.9999 107.25Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1017" d="M373.9626 71.5L561 71.5L561 107.25 L373.9626 107.25Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1018" d="M0 107.25L165.9999 107.25L165.9999 143 L0 143Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1019" d="M165.9999 107.25L373.96259999999995 107.25L373.96259999999995 143 L165.9999 143Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1020" d="M373.9626 107.25L561 107.25L561 143 L373.9626 143Z" stroke="rgba(201,208,227,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1021"><text id="SvgjsText1022" font-family="微软雅黑" text-anchor="start" font-size="16px" width="166px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="3.875" transform="rotate(0)"></text></g><g id="SvgjsG1023"><text id="SvgjsText1024" font-family="微软雅黑" text-anchor="start" font-size="16px" width="208px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="3.875" transform="rotate(0)"><tspan id="SvgjsTspan1025" dy="20" x="165.9999"><tspan id="SvgjsTspan1026">  redis.conf</tspan></tspan></text></g><g id="SvgjsG1027"><text id="SvgjsText1028" font-family="微软雅黑" text-anchor="start" font-size="16px" width="188px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="3.875" transform="rotate(0)"><tspan id="SvgjsTspan1029" dy="20" x="373.9626"><tspan id="SvgjsTspan1030">  users.acl</tspan></tspan></text></g><g id="SvgjsG1031"><text id="SvgjsText1032" font-family="微软雅黑" text-anchor="start" font-size="16px" width="166px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="39.625" transform="rotate(0)"><tspan id="SvgjsTspan1033" dy="20" x="0"><tspan id="SvgjsTspan1034">  配置方式</tspan></tspan></text></g><g id="SvgjsG1035"><text id="SvgjsText1036" font-family="微软雅黑" text-anchor="start" font-size="16px" width="208px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="39.625" transform="rotate(0)"><tspan id="SvgjsTspan1037" dy="20" x="165.9999"><tspan id="SvgjsTspan1038">  DSL</tspan></tspan></text></g><g id="SvgjsG1039"><text id="SvgjsText1040" font-family="微软雅黑" text-anchor="start" font-size="16px" width="188px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="39.625" transform="rotate(0)"><tspan id="SvgjsTspan1041" dy="20" x="373.9626"><tspan id="SvgjsTspan1042">  DSL</tspan></tspan></text></g><g id="SvgjsG1043"><text id="SvgjsText1044" font-family="微软雅黑" text-anchor="start" font-size="16px" width="166px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="75.375" transform="rotate(0)"><tspan id="SvgjsTspan1045" dy="20" x="0"><tspan id="SvgjsTspan1046">  加载 ACL 配置</tspan></tspan></text></g><g id="SvgjsG1047"><text id="SvgjsText1048" font-family="微软雅黑" text-anchor="start" font-size="16px" width="208px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="75.375" transform="rotate(0)"><tspan id="SvgjsTspan1049" dy="20" x="165.9999"><tspan id="SvgjsTspan1050">  重启 Redis 服务</tspan></tspan></text></g><g id="SvgjsG1051"><text id="SvgjsText1052" font-family="微软雅黑" text-anchor="start" font-size="16px" width="188px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="75.375" transform="rotate(0)"><tspan id="SvgjsTspan1053" dy="20" x="373.9626"><tspan id="SvgjsTspan1054">  ACL LOAD 命令</tspan></tspan></text></g><g id="SvgjsG1055"><text id="SvgjsText1056" font-family="微软雅黑" text-anchor="start" font-size="16px" width="166px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="111.125" transform="rotate(0)"><tspan id="SvgjsTspan1057" dy="20" x="0"><tspan id="SvgjsTspan1058">  持久化 ACL 配置</tspan></tspan></text></g><g id="SvgjsG1059"><text id="SvgjsText1060" font-family="微软雅黑" text-anchor="start" font-size="16px" width="208px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="111.125" transform="rotate(0)"><tspan id="SvgjsTspan1061" dy="20" x="165.9999"><tspan id="SvgjsTspan1062">  CONFIG REWRITE 命令</tspan></tspan></text></g><g id="SvgjsG1063"><text id="SvgjsText1064" font-family="微软雅黑" text-anchor="start" font-size="16px" width="188px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="111.125" transform="rotate(0)"><tspan id="SvgjsTspan1065" dy="20" x="373.9626"><tspan id="SvgjsTspan1066">  ACL SAVE 命令</tspan></tspan></text></g></g><g id="SvgjsG1067" transform="translate(168,25)"><path id="SvgjsPath1068" d="M 0 0L 250 0L 250 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1069"><text id="SvgjsText1070" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="250px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1071" dy="20" x="125"><tspan id="SvgjsTspan1072">对比 conf 和 aclfile 两种方式</tspan></tspan></text></g></g></svg></p> <h2 id="通过命令行来管理用户"><a href="#通过命令行来管理用户" class="header-anchor">#</a> 通过命令行来管理用户</h2> <p>上面可以看到，我们在安装好 Redis 后，需要通过编辑文件来选择使用哪种 ACL 模式（conf 还是外部 aclfile）。并且我们知道无论哪种方式，里面都是存一些 DSL 语句，那么自然我们可以直接在配置文件中配置各用户的 ACL 权限，但每次编辑完后都需要执行 <code>ACL LOAD</code> 或者重启 Redis 服务才能生效。</p> <p>事实上我们可以直接在命令行下配置 ACL，<strong>在命令行模式下配置的权限无需重启服务即可生效</strong>。</p> <p>只是我们在命令行模式下配置 ACL 后，必须要将其持久化到 aclfile 或者 conf 文件中，因为只有将权限持久化，下次重启才会自动加载该权限，<strong>如果忘记持久化，一旦服务宕机或重启，该权限就会丢失</strong>。</p> <h3 id="持久化的方式"><a href="#持久化的方式" class="header-anchor">#</a> 持久化的方式</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 如果使用 conf 模式，将 ACL 权限持久化到 redis.conf 文件中使用下面的命令：</span>
config rewrite

<span class="token comment"># 如果使用 aclfile 模式，将 ACL 权限持久化到 users.acl 文件中使用下面的命令：</span>
acl save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>下面看如何使用命令来创建、编辑用户以及它们的 ACL。</p> <h3 id="增删改查用户"><a href="#增删改查用户" class="header-anchor">#</a> 增删改查用户</h3> <h4 id="_1-创建和修改用户"><a href="#_1-创建和修改用户" class="header-anchor">#</a> 1）创建和修改用户</h4> <p>使用 <a href="https://redis.io/commands/acl-setuser/" target="_blank" rel="noopener noreferrer"><code>ACL SETUSER</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令来创建和编辑用户 ACL。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># username 区分大小写 </span>
<span class="token comment"># 若用户不存在，则按默认规则创建用户，并为其增加 &lt;rules&gt;。若用户存在则在已有规则上增加 &lt;rules&gt;。</span>
ACL SETUSER <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>rules<span class="token operator">&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>默认规则下新增的用户处于非活跃状态，且没有密码，同时也没有任何命令和 key 的权限：</p> <div class="language-bash {1, 5} line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;user default on nopass sanitize-payload ~* &amp;* +@all&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;user zhangsan off resetchannels -@all&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>所以我们可以在新增用户时，指定一些规则，包含密码和权限等：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建 lisi 用户，on 为活跃状态，密码为 123456，允许对所有 demo 开头的 key 使用 get 和 set 命令</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser lisi on <span class="token operator">&gt;</span><span class="token number">123456</span> ~demo* +get +set

<span class="token comment"># 让之前创建的 zhangsan 用户可用，并给它新增一个密码 123456</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan on <span class="token operator">&gt;</span><span class="token number">123456</span>

<span class="token comment"># 为 zhangsan 用户新增 list 类别下所有命令的权限</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan on +@list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>查看现在的 <code>acl list</code>，可以发现密码都是一个 sha256 码的字符串，不是明文存储，还是比较安全的：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;user default on nopass sanitize-payload ~* &amp;* +@all&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;user lisi on #8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92 ~demo* resetchannels -@all +get +set&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;user zhangsan on #8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92 resetchannels -@all +@list&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>需要注意的是，多次调用 <code>SETUSER</code> 不会重置用户，而只会将 ACL 规则应用于现有用户。什么意思呢？</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan +get
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan +set
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以上两次调用 <code>SETUSER</code> 将导致 <code>zhangsan</code> 这个用户能够调用 <a href="https://redis.io/commands/get/" target="_blank" rel="noopener noreferrer"><code>GET</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://redis.io/commands/set/" target="_blank" rel="noopener noreferrer"><code>SET</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="_2-查询用户"><a href="#_2-查询用户" class="header-anchor">#</a> 2）查询用户</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看所有用户名</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">users</span>

<span class="token comment"># 查看所有用户的 acl 信息</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl list

<span class="token comment"># 查看当前登录的用户名</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">whoami</span>

<span class="token comment"># 查看指定用户的 ACL 权限</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl getuser <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_3-删除用户"><a href="#_3-删除用户" class="header-anchor">#</a> 3）删除用户</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 删除指定用户</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl deluser <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="登录和切换指定用户"><a href="#登录和切换指定用户" class="header-anchor">#</a> 登录和切换指定用户</h3> <h4 id="_1-登录指定用户"><a href="#_1-登录指定用户" class="header-anchor">#</a> 1）登录指定用户</h4> <p>对于用 ACL 管理的用户，需要使用 <code>redis-cli --user xxx --pass yyy</code> 来登陆：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379 --user lisi --pass 123456</span>
Warning: Using a password with <span class="token string">'-a'</span> or <span class="token string">'-u'</span> option on the <span class="token builtin class-name">command</span> line interface may not be safe.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">whoami</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> NOPERM this user has no permissions to run the <span class="token string">'acl|whoami'</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>

<span class="token punctuation">[</span>root@VM-16-7-centos ~<span class="token punctuation">]</span><span class="token comment"># redis-cli -h 127.0.0.1 -p 6379 --user wangwu --pass 123456</span>
Warning: Using a password with <span class="token string">'-a'</span> or <span class="token string">'-u'</span> option on the <span class="token builtin class-name">command</span> line interface may not be safe.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">whoami</span>
<span class="token string">&quot;wangwu&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-切换到指定用户"><a href="#_2-切换到指定用户" class="header-anchor">#</a> 2）切换到指定用户</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 使用 auth 命令切换用户</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> auth <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="热加载命令"><a href="#热加载命令" class="header-anchor">#</a> 热加载命令</h3> <p>如果直接在 aclfile 中修改或新增 ACL 权限，修改之后不会立刻生效，需要执行如下命令将配置热加载至 Redis 服务中。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl load
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="持久化命令"><a href="#持久化命令" class="header-anchor">#</a> 持久化命令</h3> <p>如果是通过命令行修改或新增 ACL 权限，需要将其持久化到配置文件中，否则在重启 Redis 服务后，这些 ACL 权限就会丢失。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 如果使用的是 aclfile 方式，将 ACL 权限持久化到磁盘的 aclfile 中</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl save

<span class="token comment"># 如果使用的是 conf 方式，将 ACL 权限持久化到 redis.conf 中</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config rewrite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="查看命令类别-用于授权"><a href="#查看命令类别-用于授权" class="header-anchor">#</a> 查看命令类别，用于授权</h3> <p>命令类别的出现就是为了方便我们定义用户权限。因为如果通过一个接一个地指定所有命令来设置用户 ACL 确实很烦人，所以我们这样做：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 通过 +@all 和 -@dangerous，我们包含了所有命令，然后在 Redis 命令表中删除了所有标记为危险的命令</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl setuser zhangsan on +@all -@dangerous <span class="token operator">&gt;</span><span class="token number">123456</span><span class="token punctuation">..</span>. ~*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>那么有哪些命令类别可供选择呢？可以用如下命令进行查看：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># acl cat 显示所有的命令类别</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">cat</span>
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;keyspace&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;read&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;write&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;set&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;sortedset&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;list&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;hash&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;string&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;bitmap&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;hyperloglog&quot;</span>
<span class="token number">11</span><span class="token punctuation">)</span> <span class="token string">&quot;geo&quot;</span>
<span class="token number">12</span><span class="token punctuation">)</span> <span class="token string">&quot;stream&quot;</span>
<span class="token number">13</span><span class="token punctuation">)</span> <span class="token string">&quot;pubsub&quot;</span>
<span class="token number">14</span><span class="token punctuation">)</span> <span class="token string">&quot;admin&quot;</span>
<span class="token number">15</span><span class="token punctuation">)</span> <span class="token string">&quot;fast&quot;</span>
<span class="token number">16</span><span class="token punctuation">)</span> <span class="token string">&quot;slow&quot;</span>
<span class="token number">17</span><span class="token punctuation">)</span> <span class="token string">&quot;blocking&quot;</span>
<span class="token number">18</span><span class="token punctuation">)</span> <span class="token string">&quot;dangerous&quot;</span>
<span class="token number">19</span><span class="token punctuation">)</span> <span class="token string">&quot;connection&quot;</span>
<span class="token number">20</span><span class="token punctuation">)</span> <span class="token string">&quot;transaction&quot;</span>
<span class="token number">21</span><span class="token punctuation">)</span> <span class="token string">&quot;scripting&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>每一个命令类别具体包含了哪些命令呢？可以用如下命令进行查看：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># acl cat &lt;category&gt; 显示指定类别下的所有命令</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token function">cat</span> list
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;rpushx&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;lrange&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;lindex&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;blpop&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;lpop&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;brpoplpush&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;lset&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;rpoplpush&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;lpos&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;lrem&quot;</span>
<span class="token number">11</span><span class="token punctuation">)</span> <span class="token string">&quot;lpushx&quot;</span>
<span class="token number">12</span><span class="token punctuation">)</span> <span class="token string">&quot;llen&quot;</span>
<span class="token number">13</span><span class="token punctuation">)</span> <span class="token string">&quot;blmove&quot;</span>
<span class="token number">14</span><span class="token punctuation">)</span> <span class="token string">&quot;brpop&quot;</span>
<span class="token number">15</span><span class="token punctuation">)</span> <span class="token string">&quot;sort&quot;</span>
<span class="token number">16</span><span class="token punctuation">)</span> <span class="token string">&quot;rpop&quot;</span>
<span class="token number">17</span><span class="token punctuation">)</span> <span class="token string">&quot;ltrim&quot;</span>
<span class="token number">18</span><span class="token punctuation">)</span> <span class="token string">&quot;sort_ro&quot;</span>
<span class="token number">19</span><span class="token punctuation">)</span> <span class="token string">&quot;rpush&quot;</span>
<span class="token number">20</span><span class="token punctuation">)</span> <span class="token string">&quot;blmpop&quot;</span>
<span class="token number">21</span><span class="token punctuation">)</span> <span class="token string">&quot;lmove&quot;</span>
<span class="token number">22</span><span class="token punctuation">)</span> <span class="token string">&quot;lmpop&quot;</span>
<span class="token number">23</span><span class="token punctuation">)</span> <span class="token string">&quot;lpush&quot;</span>
<span class="token number">24</span><span class="token punctuation">)</span> <span class="token string">&quot;linsert&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="其他常用-acl-命令"><a href="#其他常用-acl-命令" class="header-anchor">#</a> 其他常用 ACL 命令</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看 ACL 安全日志</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl log

<span class="token comment"># 查看 help 文档</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> acl <span class="token builtin class-name">help</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="acl-规则"><a href="#acl-规则" class="header-anchor">#</a> ACL 规则</h2> <p>前面大量介绍了 ACL 的一些命令，ACL 是使用 DSL（Domain specific language）定义的，一个 DSL 中最核心也是最难记忆的就是规则的写法。</p> <p>以下是整理的一些 ACL 规则的列表，某些规则只是一个单词，用于激活或删除标志或对用户 ACL 执行更改。其他规则是与命令或类别名称、键模式等、关联的字符前缀。</p> <h3 id="启用和禁用用户"><a href="#启用和禁用用户" class="header-anchor">#</a> 启用和禁用用户</h3> <ul><li><code>on</code>：启用用户，可以以该用户身份进行认证。</li> <li><code>off</code>：禁用用户，不再可以使用此用户进行身份验证，但是已经通过身份验证的连接仍然可以使用。</li></ul> <h3 id="允许和禁止调用命令"><a href="#允许和禁止调用命令" class="header-anchor">#</a> 允许和禁止调用命令</h3> <ul><li><code>+&lt;command&gt;</code>：将命令添加到用户可以调用的命令列表中。</li> <li><code>-&lt;command&gt;</code>：将命令从用户可以调用的命令列表中移除。</li> <li><code>+@&lt;category&gt;</code>：允许用户调用 <code>&lt;category&gt;</code> 类别中的所有命令，有效类别为 <code>@admin</code>，<code>@set</code>，<code>@sortedset</code> 等，可通过调用 <a href="https://redis.io/commands/acl-cat/" target="_blank" rel="noopener noreferrer"><code>ACL CAT</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令查看完整列表。特殊类别 <code>@all</code> 表示所有命令，包括当前和未来版本中存在的所有命令。</li> <li><code>-@&lt;category&gt;</code>：禁止用户调用 <code>&lt;category&gt;</code> 类别中的所有命令。</li> <li><code>+&lt;command&gt;|subcommand</code>：允许使用已禁用命令的特定子命令。</li> <li><code>allcommands</code>：<code>+@all</code> 的别名，包括当前存在的命令以及将来通过模块加载的所有命令。</li> <li><code>nocommands</code>：<code>-@all</code> 的别名，禁止调用所有命令。</li></ul> <h3 id="允许和禁止访问某些-key"><a href="#允许和禁止访问某些-key" class="header-anchor">#</a> 允许和禁止访问某些 Key</h3> <ul><li><code>~&lt;pattern&gt;</code>：添加可以在命令中提及的键模式。例如 <code>~*</code> 允许所有键。</li> <li><code>allkeys</code>：<code>~*</code> 的别名。</li> <li><code>resetkeys</code>：刷新允许的键模式列表。例如 ACL <code>~foo:* ~bar:* resetkeys ~objects:*</code>，将导致客户端只能访问与模式 <code>objects:*</code> 匹配的键。</li></ul> <h3 id="为用户配置有效密码"><a href="#为用户配置有效密码" class="header-anchor">#</a> 为用户配置有效密码</h3> <ul><li><code>&gt;&lt;password&gt;</code>：将此密码添加到用户的有效密码列表中。例如，<code>&gt;mypass</code>将 <code>mypass</code> 添加到有效密码列表中。该命令会清除用户的 <code>nopass</code> 标记。每个用户可以有任意数量的有效密码。</li> <li><code>&lt;&lt;password&gt;</code>：从有效密码列表中删除此密码。若该用户的有效密码列表中没有此密码则会返回错误信息。</li> <li><code>#&lt;hash&gt;</code>：将此 SHA-256 哈希值添加到用户的有效密码列表中。该哈希值将与为 ACL 用户输入的密码的哈希值进行比较。允许用户将哈希存储在 users.acl 文件中，而不是存储明文密码。仅接受 SHA-256 哈希值，因为密码哈希必须为 64 个字符且小写的十六进制字符。</li> <li><code>!&lt;hash&gt;</code>：从有效密码列表中删除该哈希值。当不知道哈希值对应的明文是什么时很有用。</li> <li><code>nopass</code>：移除该用户已设置的所有密码，并将该用户标记为 <code>nopass</code> 无密码状态：任何密码都可以登录。<code>resetpass</code> 命令可以清除 <code>nopass</code> 这种状态。</li> <li><code>resetpass</code>：清空该用户的所有密码列表，而且移除 <code>nopass</code> 状态。<code>resetpass</code> 之后用户没有关联的密码同时也无法使用无密码登录，因此 <code>resetpass</code> 之后必须添加密码或改为 <code>nopass</code> 状态才能正常登录。</li> <li><code>reset</code>：重置用户状态为初始状态。执行以下操作 <code>resetpass</code>，<code>resetkeys</code>，<code>off</code>，<code>-@all</code>。</li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://redis.io/docs/manual/security/acl/" target="_blank" rel="noopener noreferrer">官方文档 - ACL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>（完）</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/wenyuan/fedbook/edit/main/docs/backend/redis/access-control-list.md" target="_blank" rel="noopener noreferrer">编辑此页</a></div> <div class="meta-item update-time"><span class="label">上次编辑于:</span> <span class="info">2024年5月27日 14:53</span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/backend/redis/installation-of-redis/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        Redis 的安装与卸载
      </a></span> <!----></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2851ffb2.js" defer></script><script src="/assets/js/vendors~layout-Layout.e1538772.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.134d651c.js" defer></script><script src="/assets/js/page-Redis的ACL安全策略.6f4caba6.js" defer></script>
  </body>
</html>
